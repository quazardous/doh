  mariadb:
    image: mariadb:12.0.2
    # @AI-Kitchen: IMPORTANT - MariaDB Docker auto-provisioning
    # Docker MariaDB/MySQL images handle database & user creation automatically:
    # - MARIADB_DATABASE : creates database automatically on first run
    # - MARIADB_USER : creates user automatically with full privileges on database
    # - MARIADB_PASSWORD : sets user password
    # - MARIADB_ROOT_PASSWORD : sets root password (required)
    # NO MANUAL SCRIPTS NEEDED - Docker handles initialization completely
    # Application can connect immediately with these credentials
    environment:
      MARIADB_DATABASE: ${MARIADB_DATABASE:-{{PROJECT_NAME}}}
      MARIADB_USER: ${MARIADB_USER:-{{PROJECT_NAME}}}
      MARIADB_PASSWORD: ${MARIADB_PASSWORD:-{{PROJECT_NAME}}}
      MARIADB_ROOT_PASSWORD: ${MARIADB_ROOT_PASSWORD:-{{PROJECT_NAME}}}
    volumes:
      - ./var/data/mariadb:/var/lib/mysql
      - ./docker/mariadb/conf.d:/etc/mysql/conf.d:ro
      - ./var/log/mariadb:/var/log/mysql
    labels:
      - "dev.project={{PROJECT_NAME}}"

  phpmyadmin:
    image: phpmyadmin/phpmyadmin:5.2.1
    environment:
      - PMA_HOST=mariadb
      - PMA_PORT=3306
      - PMA_USER={{PROJECT_NAME}}
      - PMA_PASSWORD={{PROJECT_NAME}}
    depends_on:
      - mariadb
    labels:
      - "traefik.enable=true"
      - "dev.project={{PROJECT_NAME}}"
      - "traefik.http.routers.phpmyadmin-{{PROJECT_NAME}}.rule=Host(`phpmyadmin.{{PROJECT_NAME}}.localhost`)"
      - "traefik.http.routers.phpmyadmin-{{PROJECT_NAME}}.entrypoints=websecure"
      - "traefik.http.routers.phpmyadmin-{{PROJECT_NAME}}.tls=true"
      - "traefik.http.services.phpmyadmin-{{PROJECT_NAME}}.loadbalancer.server.port=80"