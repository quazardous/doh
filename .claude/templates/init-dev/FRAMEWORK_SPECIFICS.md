# Framework Specifics - Complete Reference for DOH init-dev
# =================================================================
# 
# üö® MANDATORY READING: /doh:init-dev command MUST read this file for:
# - Framework detection patterns (file analysis, dependency analysis)
# - Technology-specific implementation details 
# - CLI tools and command patterns per framework
# - Hello-doh implementation requirements
# 
# L'IA DOIT consulter ce fichier avant de g√©n√©rer des stacks pour comprendre
# les conventions, outils, et patterns sp√©cifiques √† chaque technologie

# =================================================================
# FRAMEWORK DETECTION PATTERNS - MANDATORY FOR --detect MODE
# =================================================================

## Base Image Strategy by Technology Stack

**üìä STRATEGY BY DETECTED TECHNOLOGY:**

### PHP (Laravel/Symfony)
- Frontend d√©tect√© ‚Üí `FROM composer:2 + FROM node:20 ‚Üí php:8.3-fpm`
- Backend seul ‚Üí `FROM composer:2 ‚Üí php:8.3-fpm`

### Python (Django/FastAPI)  
- Frontend d√©tect√© ‚Üí `FROM node:20 ‚Üí python:3.12-slim`
- Backend seul ‚Üí `FROM python:3.12-slim`

### Node.js (Express/Nest)
- Pur ‚Üí `FROM node:20-alpine` (pas de multi-stage n√©cessaire)

### Go
- Frontend d√©tect√© ‚Üí `FROM node:20 ‚Üí golang:1.21-alpine`
- Backend seul ‚Üí `FROM golang:1.21-alpine`

### Rust
- Frontend d√©tect√© ‚Üí `FROM node:20 ‚Üí rust:1.70-slim`
- Backend seul ‚Üí `FROM rust:1.70-slim`

### Ruby (Rails)
- Frontend d√©tect√© ‚Üí `FROM node:20 ‚Üí ruby:3.2-slim`
- Backend seul ‚Üí `FROM ruby:3.2-slim`

### Java (Spring)
- Frontend d√©tect√© ‚Üí `FROM node:20 ‚Üí openjdk:21-slim`
- Backend seul ‚Üí `FROM openjdk:21-slim`

### .NET
- Frontend d√©tect√© ‚Üí `FROM node:20 ‚Üí mcr.microsoft.com/dotnet/sdk:8.0`
- Backend seul ‚Üí `FROM mcr.microsoft.com/dotnet/sdk:8.0`

**üö® RULE:** AI selects tools according to detected technology matrix

### Multi-stage Strategy Rules
- **AI Research:** WebSearch "{{framework}} docker development requirements"
- **Conditional Stages:** Cr√©er stages seulement pour outils d√©tect√©s
- **Cherry-Pick Pattern:** `COPY --from=` pour √©viter bloat des base images  
- **Version Detection:** Utiliser versions officielles actuelles des images
- **System Tools:** git, sudo install√©s dans main stage

## Framework-Specific Frontend Variable Mapping

**Frontend Environment Variable Patterns:**

### React
- `REACT_APP_API_URL=${FRONTEND_API_URL}` - Exposed to window.process.env
- `REACT_APP_DOH_SECRET=${DOH_SECRET}` - Validation via frontend

### Vue.js
- `VUE_APP_API_URL=${FRONTEND_API_URL}` - Exposed to process.env
- `VUE_APP_DOH_SECRET=${DOH_SECRET}` - Validation via frontend

### Vite (Vue 3, React, etc.)
- `VITE_API_URL=${FRONTEND_API_URL}` - Exposed to import.meta.env
- `VITE_DOH_SECRET=${DOH_SECRET}` - Validation via frontend

### Next.js
- `NEXT_PUBLIC_API_URL=${FRONTEND_API_URL}` - Exposed to process.env
- `NEXT_PUBLIC_DOH_SECRET=${DOH_SECRET}` - Validation via frontend

### Angular
- Custom environment service injection pattern
- Build-time variable replacement in environment files

### Svelte/SvelteKit
- `VITE_API_URL=${FRONTEND_API_URL}` - Via Vite integration
- Public environment variable prefix handling

## Frontend Dotenv Implementation Patterns

### Webpack Integration
```javascript
// webpack.config.js with dotenv-webpack
const Dotenv = require('dotenv-webpack');

new Dotenv({
  path: process.env.NODE_ENV === 'test' ? './.env.test' : './.env',
  safe: false,    // Use .env.example for validation if true
  systemvars: true // Include system environment variables
})
```

### Vite Integration
```javascript  
// vite.config.js with native loadEnv
const env = loadEnv(mode, process.cwd(), '');
if (mode === 'test') {
  Object.assign(process.env, loadEnv('test', process.cwd(), ''));
}
```

### Environment Routing Strategy
1. **Single Source:** Backend `.env` / `.env.test` files contain all variables
2. **Frontend Exposure:** Build tools (webpack/vite) expose prefixed variables to browser
3. **Test Isolation:** `.env.test` overrides for both backend and frontend during testing
4. **Build-Time Injection:** Environment variables embedded during build process

# =================================================================
# FRAMEWORK DETECTION PATTERNS - MANDATORY FOR --detect MODE
# =================================================================

## File-Based Detection Patterns

### Primary Detection Files (High Confidence)
| File | Framework/Technology | Confidence |
|------|---------------------|------------|
| `package.json` | Node.js/JavaScript stack | 95% |
| `requirements.txt` | Python stack | 95% |
| `composer.json` | PHP stack | 95% |
| `Cargo.toml` | Rust stack | 95% |
| `go.mod` | Go stack | 95% |
| `Gemfile` | Ruby stack | 95% |
| `pom.xml` | Java (Maven) | 95% |
| `build.gradle` | Java (Gradle) | 95% |
| `*.csproj` / `*.sln` | .NET stack | 95% |

### Secondary Detection Files (Medium Confidence)
| File | Framework Hint | Confidence |
|------|----------------|------------|
| `manage.py` | Django (Python) | 85% |
| `artisan` | Laravel (PHP) | 85% |
| `bin/console` | Symfony (PHP) | 85% |
| `Rakefile` | Rails (Ruby) | 80% |
| `next.config.js` | Next.js (Node) | 80% |
| `vite.config.js` | Vite-based (Vue/React) | 75% |
| `nuxt.config.js` | Nuxt.js (Vue) | 80% |

### Extension-Based Fallback Detection
| Extensions | Technology | Confidence |
|------------|------------|------------|
| `.py` files | Python | 60% |
| `.js` files | JavaScript/Node.js | 60% |
| `.php` files | PHP | 70% |
| `.go` files | Go | 70% |
| `.rs` files | Rust | 80% |
| `.rb` files | Ruby | 70% |
| `.java` files | Java | 70% |
| `.cs` files | C#/.NET | 70% |

## Dependency-Based Framework Detection

### Python (requirements.txt)
| Package | Framework | Confidence |
|---------|-----------|------------|
| `Django>=` | Django | 90% |
| `Flask>=` | Flask | 90% |
| `FastAPI>=` | FastAPI | 90% |
| `fastapi` | FastAPI | 90% |
| `django-rest-framework` | Django REST | 85% |
| `celery` | Task queue (Django/Flask) | 70% |

### Node.js (package.json dependencies)
| Package | Framework | Confidence |
|---------|-----------|------------|
| `"next"` | Next.js | 90% |
| `"react"` | React | 85% |
| `"vue"` | Vue.js | 85% |
| `"@vue/cli"` | Vue.js | 90% |
| `"express"` | Express.js | 85% |
| `"@nestjs/core"` | NestJS | 90% |
| `"nuxt"` | Nuxt.js | 90% |

### PHP (composer.json)
| Package | Framework | Confidence |
|---------|-----------|------------|
| `"laravel/framework"` | Laravel | 95% |
| `"symfony/framework-bundle"` | Symfony | 95% |
| `"cakephp/cakephp"` | CakePHP | 90% |
| `"codeigniter4/framework"` | CodeIgniter | 90% |

### Ruby (Gemfile)
| Package | Framework | Confidence |
|---------|-----------|------------|
| `gem 'rails'` | Rails | 95% |
| `gem 'sinatra'` | Sinatra | 90% |

## Database Detection Patterns

### Configuration File Analysis
| File | Database Indicator | Confidence |
|------|-------------------|------------|
| `settings.py` (Django) | `DATABASES = {'ENGINE': 'django.db.backends.postgresql'}` | 90% |
| `config/database.php` (Laravel) | `'default' => 'mysql'` | 85% |
| `.env` | `DATABASE_URL=postgres://` | 80% |
| `docker-compose.yml` | Service names: postgres, mysql, mariadb | 75% |

### Dependency-Based Database Detection
| Dependency | Database | Framework Context |
|------------|----------|------------------|
| `psycopg2` | PostgreSQL | Python |
| `mysqlclient` | MySQL/MariaDB | Python |
| `mysql2` | MySQL | Node.js |
| `pg` | PostgreSQL | Node.js |
| `doctrine/orm` | Multi (usually MySQL) | PHP |

## Frontend Detection Patterns (for full-stack stacks)

### Build Tool Detection
| File | Frontend Stack | Build Tool |
|------|----------------|------------|
| `vite.config.js` | Vue.js/React | Vite |
| `webpack.config.js` | React/Vue | Webpack |
| `nuxt.config.js` | Vue.js | Nuxt |
| `next.config.js` | React | Next.js |
| `angular.json` | Angular | Angular CLI |

### Package.json Frontend Clues
| Script/Dependency | Frontend Framework |
|------------------|-------------------|
| `"dev": "vite"` | Vite (Vue/React) |
| `"dev": "next dev"` | Next.js |
| `"serve": "vue-cli-service serve"` | Vue CLI |
| `"start": "react-scripts start"` | Create React App |

## üìä TOOL MATRIX BY TECHNOLOGY (avec CLI sp√©cifiques)

| Technology | CLI Tool | Project Init | Management Commands | Dependency Manager | Database Tools |
|-------------|----------|--------------|--------------------|--------------------|----------------|
| **Django** | `django-admin` | `django-admin startproject myproject .` | `python manage.py migrate/shell/test` | `pip` | Django ORM |
| **Symfony** | `symfony` CLI | `symfony new myproject --version=6.4` | `php bin/console doctrine:migrate` | `composer` | Doctrine ORM |
| **Laravel** | `artisan` | `composer create-project laravel/laravel myproject` | `php artisan migrate/tinker/test` | `composer` | Eloquent ORM |
| **Rails** | `rails` | `rails new myproject` | `rails generate/db:migrate/console` | `bundler/gem` | Active Record |
| **Next.js** | `npx create-next-app` | `npx create-next-app myproject` | `npm run dev/build` | `npm/yarn/pnpm` ‚ö†Ô∏è | Prisma/TypeORM |
| **Vue.js** | `@vue/cli` / `create-vue` | `npm create vue@latest myproject` | `npm run dev/build` | `npm/yarn/pnpm` ‚ö†Ô∏è | N/A |
| **React** | `create-react-app` | `npx create-react-app myproject` | `npm run start/build/test` | `npm/yarn/pnpm` ‚ö†Ô∏è | N/A |
| **Express** | Manual / Generators | `express myproject` or manual | `npm run dev/start` | `npm/yarn/pnpm` ‚ö†Ô∏è | Sequelize/TypeORM |
| **Spring Boot** | `spring` CLI | `spring init myproject` | `./mvnw spring-boot:run` | `maven/gradle` | JPA/Hibernate |
| **ASP.NET Core** | `dotnet` CLI | `dotnet new webapp -n myproject` | `dotnet run/test/ef` | `dotnet/nuget` | Entity Framework |
| **Go** | `go` CLI | `go mod init myproject` | `go run/build/test` | `go mod` | GORM/native SQL |
| **Rust** | `cargo` | `cargo new myproject` | `cargo run/build/test` | `cargo` | Diesel/SQLx |

## üö® FRAMEWORK COMMAND PATTERNS

**IMPORTANT**: Les variables Makefile sont d√©finies dans les fichiers `Makefile.*-part` correspondants.
Cette section documente les **patterns conceptuels** que l'IA doit suivre.

### Pattern Docker Container Execution:
**EXEC vs RUN Performance**: Les containers restent persistants et on utilise `${EXEC_CONTAINER} ${APP_CONTAINER}` pour optimiser les performances.

### Node.js Package Manager Detection Logic:
**R√®gle de d√©tection automatique**:
- Si `yarn.lock` existe ‚Üí utiliser `yarn install/build/dev`
- Si `pnpm-lock.yaml` existe ‚Üí utiliser `pnpm install/build/dev`  
- Si `package-lock.json` ou aucun ‚Üí utiliser `npm install/build/dev`
- Si demande explicite utilisateur ‚Üí respecter le choix

**@AI-Kitchen: CHOOSE** - L'IA doit adapter les commandes selon la d√©tection du gestionnaire de paquets.

## üéØ KITCHEN PRIORITY BY FRAMEWORK

### 1. **Django Kitchen** (`.claude/templates/init-dev/stacks/python/django/`)
- ‚úÖ CLI: `django-admin startproject` (g√©n√®re structure + settings.py)
- ‚úÖ Management: `python manage.py` commands + hello-doh target
- ‚úÖ ORM: Django migrations system
- ‚úÖ Testing: `python manage.py test` + `pytest-django`
- ‚úÖ Templates: Makefile seulement (PAS de requirements.txt - g√©n√©r√© par AI)

### 2. **Symfony Kitchen** (`.claude/templates/init-dev/stacks/php/symfony/`)
- ‚úÖ CLI: `symfony new` avec Symfony CLI (g√©n√®re composer.json)
- ‚úÖ Console: `php bin/console` + Doctrine commands + hello-doh target
- ‚úÖ Makers: `make:controller`, `make:entity`, `make:crud`
- ‚úÖ ORM: Doctrine migrations + fixtures
- ‚úÖ Templates: Makefile seulement (PAS de composer.json - g√©n√©r√© par CLI)

### 3. **Laravel Kitchen** (`.claude/templates/init-dev/stacks/php/laravel/`)
- ‚úÖ CLI: `composer create-project laravel/laravel` (g√©n√®re composer.json)
- ‚úÖ Artisan: `php artisan` commands + hello-doh target
- ‚úÖ ORM: Eloquent migrations + seeders  
- ‚úÖ Testing: `php artisan test` + PHPUnit
- ‚úÖ Templates: Makefile seulement (PAS de composer.json - g√©n√©r√© par CLI)

### 4. **Rails Kitchen** (`.claude/templates/init-dev/stacks/ruby/rails/`)  
- ‚úÖ CLI: `rails new` avec configuration database (g√©n√®re Gemfile)
- ‚úÖ Console: `rails console`, `rails generate` + hello-doh target
- ‚úÖ ORM: Active Record migrations
- ‚úÖ Testing: `rails test` + RSpec
- ‚úÖ Templates: Makefile seulement (PAS de Gemfile - g√©n√©r√© par CLI)

### 5. **Node.js Kitchen** (`.claude/templates/init-dev/stacks/node/`)
- ‚úÖ CLI: Framework-specific (`npx create-next-app`, `npm create vue`, etc.)
- ‚úÖ Dev: `npm run dev` + hot reload + hello-doh target
- ‚úÖ Build: `npm run build` + bundling
- ‚úÖ Testing: Framework-specific (Jest, Vitest, etc.)
- ‚úÖ Templates: Makefile seulement (PAS de package.json - g√©n√©r√© par CLI)

## üê≥ ARCHITECTURE CONTAINER PERSISTANTS

**Pattern Optimis√©**: Les containers restent actifs avec php-fpm ou sleep infinity pour √©viter de multiplier les contextes Docker.

### Container Patterns par Framework

| Framework | Container Service | EXEC Target | Performance Benefit |
|-----------|-------------------|-------------|-------------------|
| **Django** | `python -c "import time; time.sleep(float('inf'))"` | WSGI/Django dev | √âvite cr√©ation contexte Python |
| **Symfony** | `php-fpm + sleep infinity` | php-fpm pool | √âvite cr√©ation contexte PHP |
| **Laravel** | `php-fpm + sleep infinity` | php-fpm pool | √âvite cr√©ation contexte PHP |
| **Rails** | `ruby -e "sleep"` | Rails server | √âvite cr√©ation contexte Ruby |
| **Node.js** | `node -e "setTimeout(() => {}, 24*60*60*1000)"` | Node.js daemon | √âvite cr√©ation contexte Node |

### Avantages Pattern EXEC vs RUN

```bash
# ‚ùå Pattern RUN (lent) - cr√©e nouveau contexte √† chaque fois
DJANGO_MANAGE = $(RUN_APP) python manage.py
# Chaque commande: docker run --rm -> nouveau container -> nouveau contexte

# ‚úÖ Pattern EXEC (rapide) - utilise contexte persistant  
DJANGO_MANAGE = $(EXEC_APP) python manage.py
# Chaque commande: docker exec -> contexte existant -> instantan√©
```

### Services Supervisord Pattern

**Container App** maintient plusieurs processus via supervisord:
- **Web server**: php-fpm, gunicorn, puma, node
- **Task workers**: celery, queue workers
- **Frontend**: webpack-dev-server, vite dev
- **Keep-alive**: sleep infinity pour maintenir le container

## üö® R√àGLES CRITICAL PAR FRAMEWORK

1. **TOUJOURS utiliser le CLI officiel du framework**
   - Django ‚Üí `django-admin startproject` (PAS de cr√©ation manuelle)
   - Symfony ‚Üí `symfony new` (PAS de composer seul)
   - Laravel ‚Üí `composer create-project laravel/laravel` 
   - Rails ‚Üí `rails new`

2. **TOUJOURS utiliser les commandes de management natives**
   - Django ‚Üí `python manage.py migrate/shell/test`
   - Symfony ‚Üí `php bin/console doctrine:migrate`  
   - Laravel ‚Üí `php artisan migrate/tinker`
   - Rails ‚Üí `rails db:migrate/console`

3. **TOUJOURS documenter la commande exacte avant ex√©cution**
   - Chaque target Makefile doit afficher la commande avant ex√©cution
   - Pattern: `@echo "üìã Command: <actual_command>"` puis `@<actual_command>`

4. **CHAQUE framework a sa propre kitchen**
   - Pas de m√©lange entre technologies
   - Variables sp√©cifiques par framework  
   - Commands adapt√©es aux conventions du framework

5. **PAS de fichiers de d√©pendances dans les templates**
   - ‚ùå `composer.json` ‚Üí g√©n√©r√© par `symfony new` ou `composer create-project`
   - ‚ùå `requirements.txt` ‚Üí g√©n√©r√© par l'IA apr√®s analyse des besoins
   - ‚ùå `package.json` ‚Üí g√©n√©r√© par `create-next-app`, `npm create vue`, etc.
   - ‚ùå `Gemfile` ‚Üí g√©n√©r√© par `rails new`
   - ‚úÖ Seuls les templates Docker + Makefile + configs syst√®me

6. **D√âTECTION AUTOMATIQUE des gestionnaires de paquets Node.js** ‚ö†Ô∏è
   - Si `yarn.lock` existe ‚Üí utiliser `yarn install/build/dev`
   - Si `pnpm-lock.yaml` existe ‚Üí utiliser `pnpm install/build/dev`
   - Si `package-lock.json` ou aucun ‚Üí utiliser `npm install/build/dev`
   - L'IA doit adapter les variables NPM_INSTALL/NPM_BUILD/NPM_DEV en cons√©quence

## üìã PROCESSUS DE G√âN√âRATION DE D√âPENDANCES

1. **Framework CLI** ‚Üí g√©n√®re structure + fichier d√©pendances de base
2. **AI analyse** ‚Üí d√©tecte besoins sp√©cifiques (testing, linting, workers, etc.)  
3. **AI d√©tecte gestionnaire de paquets** ‚Üí selon fichiers lock existants ou demande utilisateur
   - `yarn.lock` ‚Üí utilise yarn pour toutes les commandes Node.js
   - `pnpm-lock.yaml` ‚Üí utilise pnpm pour toutes les commandes Node.js  
   - `package-lock.json` ou aucun ‚Üí utilise npm (d√©faut)
   - Demande explicite utilisateur ‚Üí respecte le choix (npm/yarn/pnpm)
4. **AI compl√®te** ‚Üí ajoute d√©pendances manquantes dans fichier g√©n√©r√©
5. **Post-build** ‚Üí `make dev-setup` installe toutes les d√©pendances avec le bon gestionnaire

**Avantages :**
- Structure officielle du framework respect√©e
- Versions compatibles garanties par CLI framework
- AI adapte aux besoins sp√©cifiques du projet
- Pas de conflit entre template et outils officiels

## üéØ SP√âCIFICIT√âS COMPL√àTES PAR FRAMEWORK

### Django Specifics

**Structure de projet Django :**
```
myproject/
‚îú‚îÄ‚îÄ manage.py                    # CLI Django
‚îú‚îÄ‚îÄ myproject/                   # Settings package
‚îÇ   ‚îú‚îÄ‚îÄ settings.py             # Configuration principale
‚îÇ   ‚îú‚îÄ‚îÄ urls.py                 # URL routing
‚îÇ   ‚îî‚îÄ‚îÄ wsgi.py                 # WSGI application
‚îî‚îÄ‚îÄ apps/                       # Applications Django
    ‚îî‚îÄ‚îÄ hello/                  # App hello-doh
        ‚îú‚îÄ‚îÄ management/
        ‚îÇ   ‚îî‚îÄ‚îÄ commands/
        ‚îÇ       ‚îî‚îÄ‚îÄ hello.py    # Command hello-doh CLI
        ‚îú‚îÄ‚îÄ views.py            # Hello-doh web endpoint
        ‚îî‚îÄ‚îÄ urls.py             # Routes hello-doh
```

**Variables d'environnement Django :**
```bash
DJANGO_SETTINGS_MODULE=myproject.settings
DJANGO_SECRET_KEY=...
DJANGO_DEBUG=True
DATABASE_URL=postgres://user:pass@db:5432/myproject
DOH_HELLOWORLD=abc123...        # Pour validation hello-doh
```

**Dotenv cascade Django :**
- `.env` ‚Üí settings.py ‚Üí environment variables
- Test: `DJANGO_SETTINGS_MODULE=myproject.settings_test` ‚Üí `.env.test`

**Hello-doh Django impl√©mentation :**
**Pr√©requis:** `make dev` (Docker up) + `make dev-setup` (dependencies) + Django welcome page working
1. `make hello-doh` ‚Üí `python manage.py startapp hello`
2. AI g√©n√®re `hello/views.py` avec endpoint `/hello` + DOH_HELLOWORLD
3. AI g√©n√®re `hello/management/commands/hello.py` avec DOH_HELLOWORLD
4. AI configure urls.py routing

---

### Symfony Specifics

**Structure de projet Symfony :**
```
myproject/
‚îú‚îÄ‚îÄ bin/console                  # CLI Symfony
‚îú‚îÄ‚îÄ config/                     # Configuration
‚îÇ   ‚îú‚îÄ‚îÄ packages/
‚îÇ   ‚îî‚îÄ‚îÄ routes.yaml
‚îú‚îÄ‚îÄ src/                        # Source code
‚îÇ   ‚îú‚îÄ‚îÄ Controller/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ HelloController.php # Hello-doh web endpoint
‚îÇ   ‚îî‚îÄ‚îÄ Command/
‚îÇ       ‚îî‚îÄ‚îÄ HelloCommand.php    # Hello-doh CLI command
‚îî‚îÄ‚îÄ var/                        # Cache, logs, sessions
```

**Variables d'environnement Symfony :**
```bash
APP_ENV=dev                     # Environment selector
APP_SECRET=...
DATABASE_URL=mysql://user:pass@db:3306/myproject
DOH_HELLOWORLD=abc123...        # Pour validation hello-doh
```

**Dotenv cascade Symfony :**
- `.env` ‚Üí `.env.local` ‚Üí `.env.dev` ‚Üí `.env.dev.local`
- Test: `APP_ENV=test` ‚Üí `.env.test`

**Hello-doh Symfony impl√©mentation :**
**Pr√©requis:** `make dev` (Docker up) + `make dev-setup` (dependencies) + Symfony demo page working
1. `make hello-doh` ‚Üí `make:controller HelloController --no-template` + `make:command HelloCommand`
2. AI g√©n√®re HelloController avec route `/hello` + DOH_HELLOWORLD
3. AI g√©n√®re HelloCommand avec DOH_HELLOWORLD validation

---

### Laravel Specifics

**Structure de projet Laravel :**
```
myproject/
‚îú‚îÄ‚îÄ artisan                     # CLI Laravel
‚îú‚îÄ‚îÄ config/                     # Configuration
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ Http/Controllers/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ HelloController.php # Hello-doh web endpoint
‚îÇ   ‚îî‚îÄ‚îÄ Console/Commands/
‚îÇ       ‚îî‚îÄ‚îÄ HelloCommand.php    # Hello-doh CLI command
‚îî‚îÄ‚îÄ routes/
    ‚îî‚îÄ‚îÄ web.php                 # Routes configuration
```

**Variables d'environnement Laravel :**
```bash
APP_ENV=local                   # Environment selector
APP_KEY=...
DB_CONNECTION=mysql
DB_HOST=mariadb
DB_DATABASE=myproject
DOH_HELLOWORLD=abc123...        # Pour validation hello-doh
```

**Dotenv cascade Laravel :**
- `.env` ‚Üí `.env.local` (simple cascade)
- Test: `APP_ENV=testing` ‚Üí `.env.testing`

**Hello-doh Laravel impl√©mentation :**
**Pr√©requis:** `make dev` (Docker up) + `make dev-setup` (dependencies) + Laravel welcome page working
1. `make hello-doh` ‚Üí `make:controller HelloController` + `make:command HelloCommand`
2. AI g√©n√®re HelloController avec m√©thode + route web.php
3. AI g√©n√®re HelloCommand avec handle() + DOH_HELLOWORLD

---

### Rails Specifics

**Structure de projet Rails :**
```
myproject/
‚îú‚îÄ‚îÄ bin/rails                   # CLI Rails
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ routes.rb              # Routes configuration
‚îÇ   ‚îî‚îÄ‚îÄ environments/
‚îú‚îÄ‚îÄ app/controllers/
‚îÇ   ‚îî‚îÄ‚îÄ hello_controller.rb     # Hello-doh web endpoint
‚îî‚îÄ‚îÄ lib/tasks/
    ‚îî‚îÄ‚îÄ hello.rake              # Hello-doh CLI task
```

**Variables d'environnement Rails :**
```bash
RAILS_ENV=development           # Environment selector
SECRET_KEY_BASE=...
DATABASE_URL=postgresql://user:pass@db:5432/myproject
DOH_HELLOWORLD=abc123...        # Pour validation hello-doh
```

**Hello-doh Rails impl√©mentation :**
**Pr√©requis:** `make dev` (Docker up) + `make dev-setup` (dependencies) + Rails welcome page working
1. `make hello-doh` ‚Üí `generate controller Hello index` + `generate task hello greet`
2. AI g√©n√®re HelloController avec action index + DOH_HELLOWORLD
3. AI g√©n√®re lib/tasks/hello.rake avec task greet + DOH_HELLOWORLD

---

### Node.js Specifics

**Structure de projet Node.js/Express :**
```
myproject/
‚îú‚îÄ‚îÄ package.json               # Dependencies + scripts
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ hello.js          # Hello-doh web endpoint
‚îÇ   ‚îî‚îÄ‚îÄ commands/
‚îÇ       ‚îî‚îÄ‚îÄ hello.js          # Hello-doh CLI command
‚îî‚îÄ‚îÄ bin/
    ‚îî‚îÄ‚îÄ cli.js                # CLI entry point
```

**Variables d'environnement Node.js :**
```bash
NODE_ENV=development           # Environment selector
PORT=3000
DATABASE_URL=postgresql://user:pass@db:5432/myproject
DOH_HELLOWORLD=abc123...       # Pour validation hello-doh
```

**Hello-doh Node.js impl√©mentation :**
**Pr√©requis:** `make dev` (Docker up) + `make dev-setup` (dependencies) + Express/framework welcome working
1. `make hello-doh` ‚Üí AI cr√©e structure routes + CLI commands
2. AI g√©n√®re `/hello` route avec Express + DOH_HELLOWORLD
3. AI g√©n√®re CLI command dans package.json scripts + DOH_HELLOWORLD

---

## üö® R√àGLES CRITIQUES D'IMPL√âMENTATION

### Framework CLI Tools Priority
1. **TOUJOURS** utiliser les outils officiels du framework
2. **JAMAIS** cr√©er des fichiers manuellement si un CLI existe
3. **TOUJOURS** respecter les conventions de structure

### Hello World Implementation Sequence (CRITICAL ORDER)
1. **Docker up** ‚Üí `make dev` pour d√©marrer tous les services
2. **Dependencies** ‚Üí `make dev-setup` pour installer toutes les d√©pendances post-build
3. **Framework hello** ‚Üí Tester hello world officiel du framework (Django welcome page, Symfony demo, etc.)
4. **hello-doh custom** ‚Üí `make hello-doh` pour cr√©er + AI g√©n√®re le hello world DOH personnalis√©

### Hello-doh Implementation Pattern
1. **Pr√©requis**: Docker running + dependencies installed + framework hello world working
2. **CLI du framework** cr√©e la structure de base (make:controller, startapp, generate)
3. **AI g√©n√®re le code** dans les fichiers cr√©√©s par le CLI avec DOH_HELLOWORLD
4. **Test web + CLI** validation DOH_HELLOWORLD dans les deux interfaces
5. **Success feedback** avec valeur DOH_HELLOWORLD visible

### Environment Variables Management
- Chaque framework a sa propre logique de cascade dotenv
- Test environments isol√©s avec configurations sp√©cifiques
- DOH_HELLOWORLD toujours valid√© dans web + CLI

Cette r√©f√©rence assure que `/doh:init-dev` impl√©mente correctement les sp√©cificit√©s de chaque framework !