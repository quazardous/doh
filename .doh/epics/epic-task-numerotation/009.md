---
name: Task status helper commands for local-only workflows
status: open
created: 2025-08-31T19:50:00Z
updated: 2025-08-31T19:50:00Z
github: [Will be updated when synced to GitHub]
depends_on: [001]
parallel: true
conflicts_with: []
---

# Task: Task status helper commands for local-only workflows

## Description

Create helper commands for task status management that work with local-only tasks (no GitHub sync required). The existing `/doh:issue-*` commands assume GitHub integration, but many tasks in DOH projects exist only locally without GitHub issues. 

This task creates local-first versions of task management commands that manipulate frontmatter directly and update epic progress calculations without requiring GitHub URLs.

## Acceptance Criteria

- [ ] `/doh:task-close <task_number>` command for closing local tasks
- [ ] `/doh:task-reopen <task_number>` command for reopening local tasks  
- [ ] `/doh:task-start <task_number>` command for starting local tasks
- [ ] Commands work by finding tasks in current epic directory structure
- [ ] Commands update frontmatter (status, timestamps) correctly
- [ ] Commands recalculate epic progress after status changes
- [ ] Commands handle tasks without GitHub URLs gracefully
- [ ] Backward compatibility with existing GitHub-synced workflows
- [ ] Clear error messages when task numbers not found
- [ ] Documentation updated to recommend helper commands over manual editing

## Technical Details

**UPDATED**: All commands must use existing library functions instead of manual operations.

### Command Behavior

#### `/doh:task-close <task_number>`
- Use `find_file_by_number()` from file-cache.sh to locate task file
- Use `update_frontmatter_field()` from frontmatter.sh: `status: open` â†’ `status: completed`
- Use `update_frontmatter_field()` to update `updated` timestamp
- Use `calculate_epic_progress()` from task.sh to recalculate epic progress
- Output: "âœ… Closed task <number>"

#### `/doh:task-reopen <task_number>`
- Use `find_file_by_number()` from file-cache.sh to locate task file
- Use `update_frontmatter_field()` from frontmatter.sh: `status: completed` â†’ `status: reopened`
- Use `update_frontmatter_field()` to update `updated` timestamp  
- Use `calculate_epic_progress()` from task.sh to recalculate epic progress
- Output: "ðŸ”„ Reopened task <number>"

#### `/doh:task-start <task_number>`
- Use `find_file_by_number()` from file-cache.sh to locate task file
- Use `update_frontmatter_field()` from frontmatter.sh: `status: open` â†’ `status: in-progress`
- Use `update_frontmatter_field()` to update `updated` timestamp
- Output: "ðŸš€ Started task <number>"

### Library Integration
```bash
# Load required libraries
source .claude/scripts/doh/lib/file-cache.sh
source .claude/scripts/doh/lib/frontmatter.sh  
source .claude/scripts/doh/lib/task.sh

# Use helper functions instead of manual file operations
task_file=$(find_file_by_number "$task_number")
update_frontmatter_field "$task_file" "status" "completed"
epic_progress=$(calculate_epic_progress "$epic_name")
```

### Integration Points
- Use existing frontmatter.sh functions for YAML manipulation
- Integrate with epic progress calculation system
- Preserve existing GitHub sync capabilities when URLs present
- Work alongside existing `/doh:issue-*` commands

## Dependencies

- **Task 001**: Core numbering library with registry management
- Existing frontmatter.sh utilities
- Epic progress calculation system

## Effort Estimate

**Size**: M (Medium)  
**Hours**: 8-12 hours

### Breakdown:
- Command script creation: 6 hours
- File discovery and error handling: 3 hours
- Epic progress integration: 2 hours
- Testing and documentation: 3 hours

## Definition of Done

- [ ] All three helper commands implemented and working
- [ ] Commands handle both GitHub-synced and local-only tasks
- [ ] Epic progress updates correctly after status changes
- [ ] Error handling covers missing files and invalid numbers
- [ ] Integration tests pass with various task configurations
- [ ] Documentation updated to recommend helper commands
- [ ] Existing workflow rules updated to mandate helper usage
- [ ] Code review completed and approved
- [ ] Manual testing confirms seamless user experience