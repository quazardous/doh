---
name: Update prd-edit with AI version matching
number: 023
status: completed
created: 2025-09-01T18:00:00Z
updated: 2025-09-01T18:15:00Z
github: [Will be updated when synced to GitHub]
epic: versioning
depends_on: [022]
parallel: false
conflicts_with: []
target_version: 0.2.0
file_version: 0.1.0
---

# Task: Update prd-edit with AI version matching

## Description
Enhance the `/doh:prd-edit` command with AI-powered version matching analysis similar to `/doh:prd-new`. When editing a PRD, the AI should analyze changes to the scope and suggest whether the current target_version is still appropriate or if it should be updated.

## Acceptance Criteria
- [x] AI analyzes PRD scope changes during edit operations
- [x] AI suggests target_version updates when scope changes significantly
- [x] AI validates current target_version against updated requirements
- [x] AI offers to create new version if scope outgrows current target
- [x] AI provides reasoning for any version change suggestions
- [x] Seamless integration with existing PRD edit workflow
- [x] Natural language understanding for scope impact analysis

## Technical Details

### AI Version Re-evaluation Process
When editing a PRD, the AI should:

1. **Analyze Original Scope**: Review the current PRD content and target_version
2. **Detect Scope Changes**: Identify additions, removals, or modifications
3. **Assess Version Impact**:
   - **No change needed**: Minor clarifications or details
   - **Version bump suggested**: Significant new features added
   - **Different version suggested**: Scope changed fundamentally
   - **New version needed**: Scope exceeds any existing version

### Version Change Analysis
```
ðŸŽ¯ AI Version Analysis for PRD Edit
====================================

Current target_version: [X.Y.Z]
Original scope: [Brief summary]

ðŸ“Š Detected Changes:
- Added features: [List new requirements]
- Removed features: [List removed items]
- Modified scope: [Describe changes]

ðŸ’¡ Version Impact Assessment:
[One of the following scenarios]

Scenario 1: Current version still appropriate âœ…
- Changes are minor clarifications
- No impact on version scope
- Recommendation: Keep target_version: [X.Y.Z]

Scenario 2: Version bump suggested ðŸ”„
- Significant new features added
- Exceeds current patch/minor scope
- Recommendation: Update to target_version: [X.Y+1.Z]

Scenario 3: Different version needed ðŸŽ¯
- Scope has fundamentally changed
- Better aligned with version: [A.B.C]
- Recommendation: Change target_version to: [A.B.C]

Scenario 4: New version required ðŸ“‹
- Scope exceeds all existing versions
- Recommendation: Create new version [X.Y.Z]

[Wait for user confirmation before proceeding]
```

### Integration with PRD Edit Workflow

1. **Load Current PRD**: Read existing PRD with current target_version
2. **Capture Edit Intent**: Understand what user wants to change
3. **Analyze Scope Delta**: Compare before/after scope
4. **Suggest Version Action**: Based on impact analysis
5. **Update PRD**: Apply changes with confirmed target_version

### Examples of Version Impact

#### Example 1: No Version Change
- **Original**: "Basic user authentication"
- **Edit**: "Basic user authentication with email verification"
- **Impact**: Minor addition, same version appropriate

#### Example 2: Version Bump Needed
- **Original**: "User login functionality"  
- **Edit**: "User login, registration, and full RBAC system"
- **Impact**: Major feature addition, suggest minor version bump

#### Example 3: Different Version Better
- **Original**: "Payment processing" (target: 1.0.0)
- **Edit**: "Analytics dashboard" 
- **Impact**: Complete scope change, suggest different version

#### Example 4: New Version Required
- **Original**: "Bug fixes" (target: 0.1.1)
- **Edit**: "Complete API redesign with breaking changes"
- **Impact**: Major scope expansion, needs new major version

## Implementation Approach

### Pure AI Command Processing
- **No Scripts**: AI processes edits directly through natural language
- **Scope Understanding**: AI comprehends semantic meaning of changes
- **Version Intelligence**: AI applies versioning best practices
- **Interactive Flow**: Conversational interface for version decisions

### Command Enhancement Points
1. **Pre-edit Analysis**: Show current version and scope summary
2. **During Edit**: Track scope changes in real-time
3. **Post-edit Validation**: Analyze final scope for version fit
4. **Version Suggestion**: Provide clear reasoning and options
5. **Confirmation Flow**: Get user approval for version changes

### Natural Language Processing
The AI should understand various edit intents:
- "Add multi-factor authentication to the auth PRD"
- "Remove the payment processing from scope"
- "Change focus from user management to reporting"
- "Expand to include enterprise features"
- "Simplify to MVP functionality only"

## Dependencies
- [ ] Task 022 (AI-powered version planning commands) - completed
- [ ] Existing `/doh:prd-edit` command structure
- [ ] DOH libraries for PRD and version file operations
- [ ] AI natural language processing capabilities

## Workflow Integration

### Enhanced PRD Edit Flow
1. User runs `/doh:prd-edit <name>`
2. AI loads current PRD and analyzes existing scope
3. User describes desired changes in natural language
4. AI applies changes and analyzes scope impact
5. AI suggests target_version action if needed
6. User confirms or adjusts version decision
7. AI updates PRD with new content and target_version
8. AI provides summary of changes and version impact

### Version Continuity
- Maintain version history in PRD comments
- Track why target_version changed over time
- Link to version files for strategic context
- Ensure version changes are justified and documented

## Effort Estimate
- Size: M
- Hours: 6-8
- Parallel: false (depends on Task 022)
- Complexity: Medium (leveraging existing AI patterns)

## Definition of Done
- [x] `/doh:prd-edit` analyzes scope changes with AI
- [x] Version impact assessment provided for all edits
- [x] Clear reasoning given for version suggestions
- [x] Interactive flow for version decisions
- [x] Natural language understanding of edit intent
- [x] Integration with existing version planning system
- [x] Version changes tracked and justified
- [x] Documentation updated with examples
- [x] Testing confirms accurate version suggestions