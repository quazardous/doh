---
name: AI-powered version planning commands
number: 022
status: completed
created: 2025-09-01T10:15:00Z
updated: 2025-09-01T17:45:00Z
github: [Will be updated when synced to GitHub]
epic: versioning
depends_on: [009, 010]
parallel: false
conflicts_with: []
target_version: 1.0.0
file_version: 0.1.0
---

# Task: AI-powered version planning commands

## Description
Create full AI-powered commands for strategic version planning that integrate with PRD creation workflow. These are pure AI commands (not bash scripts) that understand natural language and help product managers define version goals and automatically suggest target versions during PRD creation.

**IMPORTANT**: These commands are 100% AI-powered - no shell scripts needed. The AI agent processes natural language input directly and creates/updates version files through the DOH framework.

## Acceptance Criteria
- [x] Implement `/doh:version-new` as pure AI command - no bash scripts, just AI processing natural language
- [x] Implement `/doh:version-edit` as pure AI command - natural language updates processed by AI  
- [x] Update `/doh:prd-new` to suggest target_version and offer interactive AI-powered version creation
- [x] Version files kept synthetic and strategic (goals-focused, not detailed implementation)
- [x] All commands are 100% AI-powered with natural language understanding
- [x] AI creates/updates files directly through DOH libraries, no intermediate scripts
- [x] Seamless integration between AI version planning and PRD creation workflow

## Technical Details

### `/doh:version-new` Command (Pure AI)
- **Purpose**: AI agent creates strategic version planning files directly
- **Input**: Natural language description of version goals and scope
- **Output**: AI-generated structured version file in `.doh/versions/{version}.md`
- **Implementation**: AI agent processes request and uses DOH libraries to create files
- **Features**:
  - AI suggests version number based on natural language scope analysis
  - AI categorizes goals into "should have", "must have", "must not have"
  - AI maintains strategic focus (high-level features, not implementation details)
  - AI ensures semantic versioning compliance

### `/doh:version-edit` Command (Pure AI)
- **Purpose**: AI agent updates existing version files using natural language
- **Input**: Version identifier + natural language description of changes
- **Output**: AI-updated version file with maintained structure
- **Implementation**: AI agent reads current file, processes changes, writes updated file
- **Features**:
  - AI parses natural language requests for goal updates
  - AI maintains version file consistency and format
  - AI provides smart goal categorization and prioritization

### Enhanced `/doh:prd-new` Command (AI Integration)
- **Purpose**: AI adds intelligent target_version suggestion during PRD creation
- **Implementation**: AI agent enhances PRD creation with version planning
- **Integration**: 
  - AI analyzes PRD scope and suggests appropriate target version
  - AI checks existing version files for scope compatibility
  - If no suitable version exists, AI offers interactive version creation
  - AI uses `/doh:version-new` flow internally for seamless version creation

### Version File Format (Strategic Focus)
```markdown
---
version: 1.2.0
status: planned
type: minor
created: 2025-09-01T10:15:00Z
file_version: 0.1.0
---

# Version 1.2.0 - Strategic Goals

## Must Have Features
- Core authentication system
- Basic user management
- API foundation

## Should Have Features  
- Enhanced security features
- Performance optimizations
- Better error handling

## Must Not Have Features
- Premium features (reserved for 1.3.0)
- Breaking API changes
- Experimental features

## Success Criteria
- 100% backward compatibility maintained
- All must-have features fully tested
- Documentation complete for new APIs

## Release Readiness Conditions
- [ ] All must-have PRDs completed
- [ ] Security audit passed
- [ ] Performance benchmarks met
```

### AI Integration Strategy
1. **Pure AI Commands**: No bash scripts - AI agent processes everything directly
2. **Natural Language Processing**: Commands accept free-form conversational input
3. **Goal Categorization**: AI intelligently categorizes features into must/should/must-not buckets  
4. **Version Suggestion**: AI analyzes scope and suggests appropriate semantic version
5. **Strategic Focus**: AI maintains high-level, goal-oriented content automatically
6. **Direct File Manipulation**: AI uses DOH libraries directly to create/update files
7. **Workflow Integration**: AI handles seamless handoff between version planning and PRD creation

## Implementation Components

### 1. Pure AI Command Processing
- **No Scripts Required**: AI agent processes commands directly through Claude Code
- **Natural Language Understanding**: AI interprets user intent and goals
- **DOH Library Integration**: AI uses existing DOH libraries for file operations
- **Strategic Content Generation**: AI creates goal-focused, high-level version content

### 2. AI-Powered Version Planning
- **Intelligent Goal Categorization**: AI sorts features into must/should/must-not buckets
- **Semantic Version Suggestions**: AI analyzes scope to suggest appropriate version numbers
- **Strategic Focus Maintenance**: AI keeps content high-level and business-focused
- **Version Compatibility Checking**: AI ensures new versions align with project roadmap

### 3. PRD Integration Logic (AI-Enhanced)
- **Scope Analysis**: AI analyzes PRD content to suggest matching target versions
- **Version Discovery**: AI searches existing versions for compatibility
- **Interactive Creation**: AI offers version creation when no suitable version exists
- **Seamless Workflow**: AI handles entire version planning â†’ PRD creation flow

## Dependencies
- [ ] DOH libraries (frontmatter.sh, version.sh) for file operations
- [ ] Claude Code AI agent framework
- [ ] Existing DOH project structure (.doh/versions/, .doh/prds/)
- [ ] Existing PRD creation workflow to enhance

## Workflow Integration

### New PRD Creation Flow
1. User runs `/doh:prd-new <name>`
2. AI analyzes PRD scope and content
3. System suggests target_version based on:
   - Current project version
   - Existing version goals
   - Scope of proposed changes
4. If no suitable version exists:
   - Offer to create new version interactively
   - Launch `/doh:version-new` with contextual information
   - Link new version to PRD automatically
5. Complete PRD creation with target_version set

### Version Management Flow
1. Product manager runs `/doh:version-new` with goals description
2. AI processes natural language input
3. AI suggests version number and categorizes goals
4. System creates structured version file
5. Version becomes available for PRD targeting

## Effort Estimate
- Size: L
- Hours: 12-15
- Parallel: false (depends on Tasks 009, 010)
- Complexity: High (AI integration + workflow enhancement)

## Definition of Done
- [x] `/doh:version-new` command working as pure AI-powered command (no scripts)
- [x] `/doh:version-edit` command functional with AI natural language processing
- [x] `/doh:prd-new` enhanced with AI-powered target_version suggestions
- [x] AI interactive version creation flow integrated with PRD workflow
- [x] AI maintains strategic focus in all generated version files (goals, not implementation)
- [x] Full AI workflow integration tested and validated
- [x] AI commands understand conversational natural language input
- [x] AI error handling for edge cases (missing versions, conflicts)
- [x] AI-generated version files follow consistent strategic format