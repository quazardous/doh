---
name: Version bump workflow implementation
number: 006
status: closed
created: 2025-08-31T16:00:00Z
updated: 2025-09-01T21:30:00Z
github: [Will be updated when synced to GitHub]
epic: versioning
depends_on: [005]
parallel: false
conflicts_with: []
file_version: 0.1.0
---

# Task: Version bump workflow implementation

## Description
Implement a comprehensive workflow for bumping project versions, including automated version management, release triggers, and integration with DOH commands. This task will establish the process for when and how version bumps occur in the DOH system.

## Acceptance Criteria
- [ ] Define clear version bump triggers and conditions
- [ ] Create automated version bump command (/doh:version-bump)
- [ ] Implement version bump validation and checks
- [ ] Add pre/post bump hooks for custom actions
- [ ] Document version bump workflow and best practices
- [ ] Create VERSION file at project root if missing
- [ ] Integrate with git tagging and release creation

## Technical Details

### Version Bump Triggers
1. **Manual Triggers**:
   - `/doh:version-bump patch` - Bug fixes, minor changes
   - `/doh:version-bump minor` - New features, backwards compatible
   - `/doh:version-bump major` - Breaking changes

2. **Automated Triggers**:
   - On epic completion (configurable)
   - On milestone achievement
   - Via CI/CD pipeline hooks

### Implementation Components
1. **VERSION File Management**:
   - Ensure VERSION file exists at project root
   - Validate current version format
   - Update VERSION file atomically
   - Maintain version history

2. **File Version Updates**:
   - Update file_version in all DOH markdown files
   - Update version headers in scripts
   - Sync target_version fields where applicable

3. **Git Integration**:
   - Create git tag with new version
   - Generate release notes from changes
   - Push tags to remote repository
   - Create GitHub release (if configured)

4. **Validation Checks**:
   - Ensure working directory is clean
   - Verify all tests pass
   - Check for uncommitted changes
   - Validate semver format

### Command Implementation
```bash
/doh:version-bump <level> [--dry-run] [--no-git] [--message "Release message"]
```

Options:
- `level`: patch, minor, major
- `--dry-run`: Show what would change without making changes
- `--no-git`: Skip git operations (tag, push)
- `--message`: Custom release message

### Workflow Steps
1. Pre-bump validation
2. Calculate new version
3. Update VERSION file
4. Update file versions (optional)
5. Create git commit
6. Create git tag
7. Generate release notes
8. Push to remote
9. Create GitHub release
10. Post-bump notifications

## Dependencies
- [ ] Frontmatter integration (Task 005)
- [ ] Version library functions
- [ ] Git repository access
- [ ] GitHub CLI (gh) for releases

## Effort Estimate
- Size: M
- Hours: 6-8
- Parallel: false (depends on Task 005)

## Definition of Done
- [ ] Version bump command implemented
- [ ] All validation checks working
- [ ] Git integration functional
- [ ] Documentation complete
- [ ] Unit tests for version bump logic
- [ ] Integration tests for full workflow
- [ ] VERSION file automatically created/updated
- [ ] Release notes generation working