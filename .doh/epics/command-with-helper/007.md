---
name: Implement prd domain helper with new/parse functions
number: 007
status: completed
created: 2025-09-04T06:34:21Z
updated: 2025-09-04T06:34:21Z
github: [Will be updated when synced to GitHub]
epic: command-with-helper
depends_on: [001]
parallel: true
conflicts_with: []
file_version: 0.1.0
---

# Task: Implement prd domain helper with new/parse functions

## Description
Create the PRD domain helper that handles PRD creation, parsing, and status management.

## Acceptance Criteria
- [x] PRD helper created at `.claude/scripts/doh/helper/prd.sh`
- [x] Supports `helper.sh prd new <name>` for new PRD creation
- [x] Supports `helper.sh prd parse <prd_name>` for PRD analysis
- [x] Supports `helper.sh prd status <prd_name>` for status checks
- [x] **NEW: Supports `helper.sh prd update <name> field:value [field:value...]`**
- [x] Uses frontmatter API for all markdown operations
- [x] Proper error handling and validation

## Technical Details
**IMPORTANT**: Read [docs/writing-good-scripts.md](docs/writing-good-scripts.md) for complete helper implementation patterns.

- Create `helper/prd.sh` file containing normalized helper functions
- Implement `helper_prd_new()` function for PRD template creation
- Implement `helper_prd_parse()` function for PRD content analysis
- Implement `helper_prd_status()` function for PRD status management
- Use helper functions for business logic, call APIs for basic operations
- Extract logic from existing PRD commands

## Dependencies
- [ ] Task 001: Helper infrastructure must be complete

## Effort Estimate
- Size: M
- Hours: 6-8
- Parallel: true (can run alongside other domain helpers)

## Definition of Done
- [x] PRD helper scripts created
- [x] Can successfully create and parse PRDs
- [x] **NEW: Can update PRD fields via `helper_prd_update()` using `frontmatter_update_many()`**
- [x] Uses frontmatter API exclusively
- [ ] Tests written and passing
- [ ] Code reviewed

## Update Functionality Examples (COMPLETED)
```bash
# Library API - Direct file operations
./.claude/scripts/doh/api.sh prd update /path/to/prd.md "status:implemented" "target_version:1.2.0"

# Helper API - Entity-based operations  
./.claude/scripts/doh/helper.sh prd update "user-authentication" "status:in_progress" "priority:high"

# Multi-field updates in one call
helper_prd_update "command-with-helper" "status:completed" "implementation_date:2025-09-05"
```