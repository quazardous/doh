---
name: Monitoring and Logging Infrastructure
status: open
created: 2025-08-31T06:51:25Z
updated: 2025-08-31T06:51:25Z
github: [Will be updated when synced to GitHub]
depends_on: [001]
parallel: true
conflicts_with: []
---

# Task: Monitoring and Logging Infrastructure

## Description
Build the centralized logging system that aggregates worktree activity, streams logs to the main Claude conversation, and provides real-time progress tracking with commit checkpoints.

## Acceptance Criteria
- [ ] Log directory structure created under `.doh/logs/`
- [ ] Real-time log streaming works with < 2 second latency
- [ ] Commit checkpoints appear in main stream
- [ ] Progress aggregation from multiple agents
- [ ] `/doh:monitor` command shows worktree status

## Technical Details
- **Log structure**:
  ```
  .doh/logs/
    main.log                 # Main branch operations
    epic-feature-x/
      agent-1.log           # Individual agent logs
      agent-2.log
      summary.log           # Aggregated progress
      commits.log           # Git commit history
      status.json           # Current status data
  ```
- **Implementation components**:
  - Log aggregator script that combines agent outputs
  - Streaming mechanism using `tail -f` with buffering
  - Commit watcher that detects new commits
  - Status dashboard generator
- **New commands**:
  - `/doh:monitor [epic]` - View specific worktree
  - `/doh:monitor --all` - View all active worktrees
  - `/doh:switch-monitor` - Change monitoring focus

## Dependencies
- [ ] Task 001 (workspace library for worktree detection)
- [ ] No blocking dependencies on other tasks

## Effort Estimate
- Size: M
- Hours: 10 hours
- Parallel: true (can work alongside task 003)

## Definition of Done
- [ ] Log directory structure automatically created
- [ ] Streaming shows updates within 2 seconds
- [ ] Monitor command displays formatted progress
- [ ] Commit checkpoints tracked accurately
- [ ] Multiple worktrees can be monitored