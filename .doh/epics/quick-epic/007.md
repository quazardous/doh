---
id: 007
title: Update existing commands to handle quick tasks properly
status: pending
created: 2025-08-31T15:06:00Z
priority: medium
estimate: 5 hours
epic: quick-epic
depends_on: [005, 006]
---

# Task 007: Update existing commands to handle quick tasks properly

## Overview

Update existing DOH commands (`/doh:next`, `/doh:status`, `/doh:sync`, etc.) to properly handle tasks from the QUICK system and maintain consistency with the never-completing system behavior. This ensures quick tasks integrate seamlessly with the existing DOH workflow and user experience.

## Requirements

### Functional Requirements

#### /doh:next Command Updates
- Include QUICK system tasks in task prioritization algorithm
- Handle never-completing system status appropriately
- Show quick tasks with clear epic identification: `[QUICK-001] Task description`
- Respect task dependencies even within QUICK epic
- Apply same filtering and sorting logic as regular epics

#### /doh:status Command Updates
- Display QUICK system with special status indicator
- Show task count and completion percentage (for individual tasks, not system)
- Handle never-completing system in progress calculations
- Format: `QUICK (∞): 3 active tasks, 12 completed tasks`
- Don't include QUICK system completion in overall project progress

#### /doh:sync GitHub Integration
- Sync QUICK tasks to GitHub issues with appropriate labels
- Handle QUICK system metadata in GitHub sync
- Apply "quick-task" label to distinguish from regular epic tasks
- Maintain GitHub issue links for QUICK tasks
- Handle task completion status syncing

#### /doh:list and Epic Management
- Include QUICK in epic listings with special marking
- Prevent deletion of QUICK system through standard commands
- Show reserved status in epic information displays
- Handle filtering options to include/exclude QUICK tasks

### Technical Requirements

#### Epic Status Handling
- Recognize `never_complete: true` flag in epic frontmatter
- Skip completion calculations for never-completing epics
- Handle percentage displays appropriately
- Maintain task-level completion tracking within QUICK

#### Task Identification
- Generate unique task IDs within QUICK system (QUICK-001, QUICK-002, etc.)
- Handle task ID conflicts and sequencing
- Maintain compatibility with existing task reference patterns
- Support cross-epic task dependencies involving QUICK tasks

#### Filtering and Display
- Add QUICK-specific filtering options where appropriate
- Ensure consistent formatting across all commands
- Handle large numbers of QUICK tasks gracefully
- Support search/grep operations on QUICK tasks

#### Integration Points
- Maintain existing command performance requirements
- Preserve backward compatibility with all DOH commands
- Handle QUICK system absence gracefully (pre-init projects)
- Support existing configuration and customization options

## Implementation Details

### Command-Specific Updates

#### /doh:next Implementation
```bash
# Update task selection logic
get_next_tasks() {
    local tasks=()
    
    # Process regular epics
    for epic in .doh/epics/*/epic.md; do
        if [[ "$(get_epic_status "$epic")" == "active" ]]; then
            tasks+=($(get_epic_tasks "$epic"))
        fi
    done
    
    # Process QUICK system specially
    if [[ -f .doh/quick/epic.md ]]; then
        tasks+=($(get_quick_tasks))
    fi
    
    # Apply prioritization and dependencies
    prioritize_tasks "${tasks[@]}"
}
```

#### /doh:status Implementation
```bash
# Update status reporting
show_epic_status() {
    local epic_file="$1"
    local epic_name="$(get_epic_name "$epic_file")"
    
    if [[ "$epic_name" == "QUICK" ]]; then
        local active_count=$(count_active_quick_tasks)
        local completed_count=$(count_completed_quick_tasks)
        echo "QUICK (∞): ${active_count} active, ${completed_count} completed"
    else
        # Regular epic status logic
        show_regular_epic_status "$epic_file"
    fi
}
```

#### GitHub Sync Updates
```bash
# Handle QUICK task syncing
sync_quick_tasks() {
    local quick_dir=".doh/quick"
    
    for task_file in "$quick_dir"/*.md; do
        [[ "$task_file" == */epic.md ]] && continue
        
        local issue_title="[QUICK] $(get_task_title "$task_file")"
        local labels="quick-task,doh-managed"
        
        sync_task_to_github "$task_file" "$issue_title" "$labels"
    done
}
```

### Library Function Updates

#### Frontmatter Library Extensions
- Add `is_never_completing_epic()` function
- Update `get_epic_progress()` to handle special systems
- Add `get_quick_task_id()` for QUICK-specific ID generation
- Extend `validate_epic()` to handle reserved systems

#### Task Management Functions
- Update `get_all_tasks()` to include QUICK tasks
- Modify `calculate_project_progress()` to exclude never-completing epics
- Add `get_next_quick_task_number()` for sequential numbering
- Update `find_task_by_id()` to handle QUICK task ID format

### Dependencies
- Task 005: QUICK system structure and reserved name handling
- Task 006: Direct flag support and task creation patterns
- Existing DOH command library functions
- GitHub API integration patterns
- Current epic and task file format standards

## Testing Strategy

### Command Integration Testing
1. **Next Command**: Test QUICK tasks appear in prioritized list
2. **Status Command**: Verify QUICK system status display and progress exclusion
3. **Sync Command**: Test GitHub sync with quick-task labels
4. **List Commands**: Confirm QUICK system appears with special indicators

### Workflow Testing
1. **Task Lifecycle**: Create, work on, and complete QUICK tasks
2. **Dependencies**: Test cross-epic dependencies involving QUICK tasks
3. **Filtering**: Verify filtering options work with QUICK tasks
4. **Search**: Test search/grep functionality on QUICK task content

### Edge Case Testing
- Commands run on projects without QUICK system (pre-update)
- Large numbers of QUICK tasks (100+ tasks)
- QUICK tasks with complex dependencies
- Concurrent modifications to QUICK system

### Performance Testing
- Status command performance with many QUICK tasks
- Next command performance including QUICK task analysis
- GitHub sync performance for bulk QUICK task updates
- Memory usage with extensive QUICK task history

## Acceptance Criteria

- [ ] `/doh:next` includes QUICK tasks in prioritization with clear identification
- [ ] `/doh:status` shows QUICK system with special never-completing indicator
- [ ] Project progress calculations exclude QUICK system from completion percentages
- [ ] GitHub sync properly labels and manages QUICK task issues
- [ ] All DOH commands handle QUICK system presence gracefully
- [ ] Task ID generation works correctly for QUICK tasks (QUICK-001, etc.)
- [ ] Cross-epic dependencies function properly with QUICK tasks
- [ ] Commands maintain backward compatibility and performance requirements

## Definition of Done

- All DOH commands updated to recognize and handle QUICK system properly
- Never-completing system logic implemented across command suite
- GitHub integration supports QUICK task syncing with appropriate labels
- Task identification and numbering works consistently within QUICK system
- Performance requirements maintained despite additional QUICK task processing
- Backward compatibility preserved for projects without QUICK system
- Integration testing passes for all command interactions with QUICK tasks