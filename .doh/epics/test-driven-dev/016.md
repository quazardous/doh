---
name: "Build minimal test framework"
number: "016"
status: "completed"
created: "2025-09-01T17:28:00Z"
updated: "2025-09-01T08:31:42Z"
epic: "test-driven-dev"
depends_on: ["015"]
parallel: false
conflicts_with: []
---

# Task 016: Build minimal test framework

## Description

Build a lightweight bash test framework with basic assertions and TAP-like output format. The framework should be under 200 lines and provide essential testing capabilities for DOH's bash-based functionality.

## Acceptance Criteria

- [ ] Create lightweight bash test framework (< 200 lines total)
- [ ] Implement basic assertion functions:
  - `assert_equals`, `assert_not_equals`
  - `assert_true`, `assert_false`
  - `assert_contains`, `assert_file_exists`
  - `assert_command_success`, `assert_command_fails`
- [ ] TAP-like output format for test results
- [ ] Test discovery and execution capabilities
- [ ] Proper exit codes for CI/CD integration
- [ ] Basic setup/teardown support for test isolation
- [ ] Framework is self-testable (dogfooding)

## Technical Details

**Framework components:**
- Core assertion library with clear failure messages
- Test runner with discovery mechanism
- TAP-compatible output for CI/CD integration
- Setup/teardown hooks for test isolation
- Error handling and proper exit codes

**Output format:**
```
1..n
ok 1 - test description
not ok 2 - test description
# Diagnostic information
```

**Size estimate:** S (Small - focused framework)

**Dependencies:** Requires Task 015 (TDD documentation) for patterns and standards