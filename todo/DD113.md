# DD113 - DOH Development Architecture Cleanup & Standardization

**Status**: PENDING  
**Priority**: HIGH ⭐ (Project Organization)  
**Epic**: EDD116 (DOH Development Architecture Refactoring)

Clean up and standardize the DOH development project architecture to create a clear, minimal structure that separates
runtime support from Claude-specific components.

## Current Problem

The DOH development project has grown organically, creating confusion with mixed purposes:

- Scripts scattered across multiple directories
- Claude-specific vs project-generic components mixed
- Unclear separation between development tools and runtime support
- Cache and output files in inconsistent locations

## Objective

Create a clean, logical architecture that:

1. **Minimizes .claude/ directory** - Only essential Claude commands
2. **Groups by functionality** - Scripts organized by purpose
3. **Clear separation** - Development tools vs runtime support
4. **Consistent locations** - Cache, docs, tasks, agents in predictable places

## Proposed Architecture

### **Core Principle**: Separation by Purpose

```text
doh-dev/                          # DOH Development Project Root
├── .claude/                      # ❌ MINIMIZE - Only Claude commands
│   └── commands/                 # Essential /dd: commands only
├── scripts/                      # ✅ All executable scripts by category
│   ├── linting/                  # Linting execution scripts
│   ├── development/              # Development workflow scripts
│   ├── analysis/                 # Analysis and reporting scripts
│   ├── agents/                   # Agent orchestration scripts
│   ├── common/                   # Shared utility scripts (cross-functional)
│   └── lib/                      # Script libraries and modules
├── agents/                       # ✅ All agent-related content
│   ├── workspace/                # Agent session workspaces
│   ├── templates/                # Agent prompt templates
│   └── tools/                    # Agent-specific tools
├── analysis/                     # ✅ Task outputs and reports
├── docs/                         # ✅ All documentation
├── todo/                         # ✅ Task management (current location correct)
├── .cache/                       # ✅ All cache and temporary data
│   ├── linting/                  # Linting cache and data
│   ├── analysis/                 # Analysis temporary files
│   └── agents/                   # Agent session cache
├── dev-tools/                    # 🔄 RESTRUCTURE - Keep only core libraries
│   ├── lib/                      # Shared libraries (lint-core.sh, etc.)
│   ├── hooks/                    # Git hooks
│   └── examples/                 # Usage examples
└── linting/                      # ✅ Plugin configurations and data only
    ├── plugins.d/                # Plugin configurations (rules, configs)
    │   ├── markdownlint/         # Markdownlint plugin configs
    │   ├── codespell/            # Codespell plugin configs
    │   └── prettier/             # Prettier plugin configs
    └── config/                   # Base linter configurations
```

## Migration Plan

### **Phase 1: Script Consolidation & Cleanup**

```bash
# Create script directory structure
mkdir -p scripts/{linting,development,analysis,agents,common,lib}

# Move linting execution scripts
mv dev-tools/linting/*.sh scripts/linting/
mv dev-tools/scripts/plugin-proposals.sh scripts/linting/

# Move plugin management scripts OUT of configs directory
mv linting/plugins.d/manager_*.sh scripts/linting/

# Move dev-tools libraries to scripts/lib (shared libraries)
mv dev-tools/lib/*.sh scripts/lib/

# Clean linting/plugins.d/ - keep only pure configurations
# (Remove manager scripts, keep only config files and directories)
```

### **Phase 2: Agent Organization**

```bash
# Keep current agents/ structure (already good)
# Ensure all agent content is under ./agents/
```

### **Phase 3: Cache Standardization**

```bash
# Current .cache/ structure is good, verify completeness:
# .cache/linting/ - ✅ Already correct
# Add other cache types as needed
```

### **Phase 4: Dev-tools Simplification**

```bash
# Keep only essential libraries and infrastructure
# dev-tools/lib/ - Shared libraries (lint-core.sh, cache-lib.sh)
# dev-tools/hooks/ - Git hooks
# dev-tools/examples/ - Usage examples
# Remove dev-tools/scripts/ (moved to scripts/)
# Remove dev-tools/linting/ (moved to scripts/linting/)
```

### **Phase 5: Documentation Verification**

```bash
# Verify all docs are in ./docs/
# Move any remaining documentation from scattered locations
```

## Benefits

### **Clear Separation of Concerns**

- **scripts/** - All executables organized by function
- **agents/** - Complete agent ecosystem
- **analysis/** - Task outputs and reports
- **docs/** - Centralized documentation
- **.cache/** - All temporary/cache data
- **dev-tools/** - Only shared libraries and infrastructure

### **Minimal Claude Footprint**

- **.claude/** contains only essential commands
- No scripts or data files in .claude/
- Claude-agnostic project structure

### **Predictable Organization**

- Developers know exactly where to find/add scripts
- Clear distinction between runtime support and development tools
- Consistent cache and temporary file locations

## Implementation Tasks

### **1. Script Migration**

- [ ] Move `dev-tools/linting/*.sh` → `scripts/linting/`
- [ ] Move `dev-tools/scripts/plugin-proposals.sh` → `scripts/linting/`
- [ ] Create `scripts/development/` for development workflow scripts
- [ ] Create `scripts/analysis/` for analysis and reporting scripts
- [ ] Update all script path references in documentation

### **2. Dev-tools Cleanup**

- [ ] Keep only `dev-tools/lib/`, `dev-tools/hooks/`, `dev-tools/examples/`
- [ ] Remove empty `dev-tools/scripts/` and `dev-tools/linting/` directories
- [ ] Update references to moved dev-tools components

### **3. Path Reference Updates**

- [ ] Update all documentation files with new script paths
- [ ] Update task files (DD103, DD107, etc.) with new paths
- [ ] Update command files in `.claude/commands/` with new paths
- [ ] Update Makefile targets with new script locations

### **4. Verification**

- [ ] Test all linting workflows still function
- [ ] Verify agent workflows are unaffected
- [ ] Confirm cache locations are working
- [ ] Test development scripts and commands

## Success Criteria

✅ **Clean Architecture**: Clear separation by purpose  
✅ **Minimal .claude/**: Only essential commands remain  
✅ **Organized Scripts**: All scripts grouped by functionality in ./scripts/  
✅ **Working System**: All existing functionality preserved  
✅ **Updated Documentation**: All references point to new locations

## Integration Notes

### **With Current Systems**

- **DD103 Intelligence System**: Scripts move to `scripts/linting/`
- **DD107 Cache System**: No changes needed (already in `.cache/`)
- **Agent Workflows**: No changes needed (already in `./agents/`)
- **Plugin System**: No changes needed (already in `./linting/plugins.d/`)

### **Command Impact**

- `/dd:lint` commands: Update to reference `scripts/linting/smart-lint.sh`
- Development commands: Update to reference `scripts/development/`
- Analysis commands: Update to reference `scripts/analysis/`

## Files to Create/Update

**New Directories**:

- `scripts/linting/` (populated from dev-tools/linting/)
- `scripts/development/` (for development workflow scripts)
- `scripts/analysis/` (for analysis and reporting scripts)

**Major Updates**:

- All task files referencing moved scripts
- All command files in `.claude/commands/`
- Documentation files with script references
- Makefile targets

**Architecture Documentation**:

- Update project README with new structure
- Create development guide explaining directory purposes
- Update contributor documentation

This task will result in a clean, professional project architecture that clearly separates DOH development support from
Claude-specific components while maintaining all existing functionality.
