# DD117 - Post-DD115 Path Validation & Integration Testing

**Status**: PENDING  
**Priority**: HIGH ‚≠ê (Architecture Validation)  
**Dependencies**: DD115 ‚úÖ COMPLETED  
**Epic**: EDD116 (DOH Development Architecture Refactoring)

Comprehensive validation that all scripts, documentation, and commands work correctly with the new DD115 directory
structure and path changes.

## Objective

After DD115 complete dev-tools/ migration, ensure that:

1. **All scripts function correctly** with new paths and internal references
2. **All documentation** references correct new paths
3. **All commands** work with updated script locations
4. **Integration points** between components still function
5. **No broken references** remain from the migration

## DD115 Path Changes to Validate

### **Major Path Changes from DD115**

```text
BEFORE DD115                    ‚Üí  AFTER DD115
dev-tools/scripts/lint-files.sh ‚Üí scripts/linting/lint-files.sh
dev-tools/hooks/*               ‚Üí scripts/git/hooks/* & scripts/git/
dev-tools/examples/*            ‚Üí contrib/examples/scripts/*
dev-tools/docs/*                ‚Üí docs/*
dev-tools/linters/*             ‚Üí linting/config/*
dev-tools/scripts/setup-dev-env.sh ‚Üí scripts/development/setup-dev-env.sh
dev-tools/scripts/dd-lint-wrapper.sh ‚Üí scripts/linting/dd-lint-wrapper.sh
```

### **Critical Script: lint-files.sh**

**Impact**: `dev-tools/scripts/lint-files.sh` ‚Üí `scripts/linting/lint-files.sh` affects:

- All linting workflows
- Command executions (/dd:lint, /dd:commit)
- Script internal references
- Documentation examples
- Makefile targets

## Validation Tasks

### **Phase 1: Script Internal Validation**

#### **1.1: Scripts Self-Reference Check**

```bash
# Check if scripts reference their own new locations correctly
grep -r "dev-tools/scripts/lint-files.sh" scripts/
grep -r "dev-tools/hooks" scripts/
grep -r "dev-tools/examples" scripts/
grep -r "dev-tools/linters" scripts/
```

#### **1.2: Script Execution Test**

```bash
# Test all moved scripts can execute and find their dependencies
scripts/linting/lint-files.sh --help
scripts/linting/smart-lint.sh stats
scripts/linting/dd-lint-wrapper.sh --help
scripts/development/setup-dev-env.sh --help
scripts/git/install-hooks.sh --help
```

#### **1.3: Inter-Script Reference Validation**

```bash
# Check if scripts reference other moved scripts correctly
grep -r "dev-tools/" scripts/linting/
grep -r "dev-tools/" scripts/git/
grep -r "dev-tools/" scripts/development/
```

### **Phase 2: Documentation Validation**

#### **2.1: Core Documentation Update Check**

```bash
# Find documentation files referencing old paths
grep -r "dev-tools/scripts/lint-files.sh" docs/ .claude/ todo/ analysis/
grep -r "dev-tools/hooks" docs/ .claude/ todo/ analysis/
grep -r "dev-tools/examples" docs/ .claude/ todo/ analysis/
```

#### **2.2: Command Documentation Validation**

```bash
# Check command files for old path references
find .claude/commands/ -name "*.md" -exec grep -l "dev-tools/" {} \;
grep -r "dev-tools/scripts/lint-files.sh" .claude/commands/
```

#### **2.3: Task Files Cross-Reference Check**

```bash
# Verify task files don't reference old paths (beyond DD115 itself)
find todo/ -name "*.md" ! -name "DD115.md" -exec grep -l "dev-tools/" {} \;
```

### **Phase 3: Integration Point Testing**

#### **3.1: Makefile Target Validation**

```bash
# Check if Makefile targets reference correct script paths
grep -n "dev-tools/" Makefile
make lint --dry-run  # Test linting target
```

#### **3.2: Git Hook Integration Test**

```bash
# Verify git hooks can access moved scripts
scripts/git/install-hooks.sh --dry-run
# Test pre-commit hook functionality
scripts/git/hooks/pre-commit --help
```

#### **3.3: Cache System Integration**

```bash
# Test cache system still works with moved scripts
scripts/linting/lint-scan.sh --help
scripts/linting/lint-progress.sh --help
ls -la .cache/linting/  # Verify cache structure intact
```

### **Phase 4: Command Integration Testing**

#### **4.1: /dd:lint Command Test**

```bash
# Test main linting command with new script path
# Should use scripts/linting/lint-files.sh now
echo "Testing /dd:lint command integration..."
# Manual test: execute typical /dd:lint workflow
```

#### **4.2: /dd:commit Integration Test**

```bash
# Test commit workflow with moved hooks and scripts
# Should access scripts/git/hooks/ for git hooks
echo "Testing /dd:commit integration..."
# Manual test: verify pre-commit hooks work
```

#### **4.3: Development Workflow Test**

```bash
# Test development scripts integration
scripts/development/setup-dev-env.sh --check
# Verify development workflow still functions
```

## Automated Validation Script

### **DD116 Validation Script: validate-dd115-migration.sh**

```bash
#!/bin/bash
# DD116 - Automated validation for DD115 migration

echo "üîç DD116 - Validating DD115 Migration..."

# Phase 1: Check for old path references
echo "Phase 1: Scanning for old dev-tools references..."
OLD_REFS=0

# Critical files check
if grep -r "dev-tools/scripts/lint-files.sh" . --exclude-dir=.git --exclude="todo/DD115.md" --exclude="todo/DD116.md"; then
    echo "‚ùå Found old lint-files.sh references"
    ((OLD_REFS++))
fi

if grep -r "dev-tools/hooks" . --exclude-dir=.git --exclude="todo/DD115.md" --exclude="todo/DD116.md"; then
    echo "‚ùå Found old hooks references"
    ((OLD_REFS++))
fi

# Phase 2: Test script execution
echo "Phase 2: Testing script execution..."
EXEC_ERRORS=0

scripts_to_test=(
    "scripts/linting/lint-files.sh --help"
    "scripts/linting/smart-lint.sh --help"
    "scripts/git/install-hooks.sh --help"
)

for script in "${scripts_to_test[@]}"; do
    if ! $script >/dev/null 2>&1; then
        echo "‚ùå Script execution failed: $script"
        ((EXEC_ERRORS++))
    fi
done

# Phase 3: Integration test
echo "Phase 3: Integration testing..."
INTEGRATION_ERRORS=0

# Test main linting workflow
if ! scripts/linting/lint-files.sh --check README.md >/dev/null 2>&1; then
    echo "‚ùå Main linting workflow failed"
    ((INTEGRATION_ERRORS++))
fi

# Final report
echo "üìä DD116 Validation Results:"
echo "   Old path references: $OLD_REFS"
echo "   Script execution errors: $EXEC_ERRORS"
echo "   Integration errors: $INTEGRATION_ERRORS"

if [[ $OLD_REFS -eq 0 && $EXEC_ERRORS -eq 0 && $INTEGRATION_ERRORS -eq 0 ]]; then
    echo "‚úÖ DD115 migration validation: SUCCESS"
    exit 0
else
    echo "‚ùå DD115 migration validation: FAILED"
    exit 1
fi
```

## Manual Test Scenarios

### **Scenario 1: Complete Linting Workflow**

1. Run `scripts/linting/lint-files.sh README.md`
2. Verify it can access all dependencies (lint-core.sh, configs)
3. Check output formatting and error handling
4. Confirm cache integration works

### **Scenario 2: Plugin Management Workflow**

1. Test `scripts/linting/manager_markdownlint_plugin.sh --list`
2. Verify it can access linting/plugins.d/ configs
3. Test plugin enable/disable functionality
4. Confirm integration with main linting script

### **Scenario 3: Git Integration Workflow**

1. Run `scripts/git/install-hooks.sh`
2. Test pre-commit hook execution
3. Verify hooks can access linting scripts
4. Confirm commit workflow integration

### **Scenario 4: Development Setup Workflow**

1. Execute `scripts/development/setup-dev-env.sh`
2. Verify it can set up development environment
3. Check integration with other development tools
4. Confirm documentation references are correct

## Expected Findings & Fixes

### **High Probability Issues**

1. **Command files** (.claude/commands/dd/lint.md) referencing old dev-tools paths
2. **Documentation examples** showing old script locations
3. **Makefile targets** using outdated paths
4. **Script internal references** not updated during DD115
5. **Task file examples** with old path patterns

### **Fix Strategy**

For each found issue:

1. **Update path references** to new DD115 locations
2. **Test functionality** after path update
3. **Verify integration** still works
4. **Document changes** made

## Success Criteria

‚úÖ **Zero old path references** - No dev-tools/ references in active code  
‚úÖ **All scripts executable** - Every moved script runs without path errors  
‚úÖ **Documentation accurate** - All docs reflect new structure  
‚úÖ **Commands functional** - /dd:lint and /dd:commit work correctly  
‚úÖ **Integration preserved** - All workflows function end-to-end  
‚úÖ **Cache system working** - Linting cache/performance features intact  
‚úÖ **Git hooks functional** - Pre-commit and other hooks work properly

## Deliverables

1. **Validation script** - Automated DD115 migration checker
2. **Updated documentation** - All path references corrected
3. **Fixed command files** - All .claude/commands/ updated
4. **Integration test results** - Proof all workflows function
5. **Migration completeness report** - Final verification of DD115 success

This task ensures DD115 migration is 100% successful with no broken functionality or incorrect references remaining in
the system.
