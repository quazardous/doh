# DD071 - Project Context Isolation for DOH-DEV vs DOH Runtime üîÑ

**Status**: COMPLETED **Priority**: HIGH - Critical Architecture **Dependencies**: None (foundational change) **Epic**:
EDD075 DOH-DEV Internal System - Phase 1  
**Tags**: `#architecture` `#versioning` `#isolation` `#doh-dev` **Estimated Effort**: 2-3 hours **Created**: 2025-08-28
**Proposed Version**: VDD-0.1.0 (next runtime: doh-1.5.0)

## üìã Description

Establish clear project context isolation between DOH-DEV (internal development support) and DOH Runtime (public
distribution) to prevent context mixing, ensure proper dependency isolation, and implement dual version management
systems.

## üéØ Problem Statement

**Current Issues**:

- Task context confusion between internal doh-dev work vs runtime doh work
- Single version file (version-1.4.0.md) mixing both project contexts
- `/dd:next` doesn't distinguish between project boundaries
- Dependencies analysis doesn't respect project isolation
- Unclear which project a task belongs to when created

**Target Solution**:

- Clear project prefixes: `dd-x.x.x` (doh-dev) vs `doh-x.x.x` (runtime)
- Separate version files with distinct naming
- Project-aware task recommendations in `/dd:next`
- Zero cross-project dependencies unless explicitly documented
- Clear task creation context: `/doh` = runtime, `/doh-dev` = internal

## Core Functionality

### 1. Dual Version Management System

**Version Naming Convention**:

- **DOH-DEV Internal**: `VDD-0.1.0`, `VDD-0.2.0`, `dd-1.0.0`
  - Tracks internal tooling, commands, development support
  - Version file: `VDD-0.1.0.md`
  - Focus: Developer experience, command evolution, internal workflows

- **DOH Runtime**: `VDOH-1.4.0`, `doh-1.5.0`, `doh-2.0.0`
  - Tracks public distribution, runtime features, end-user functionality
  - Version file: `VDOH-1.4.0.md` (renamed from current)
  - Focus: Runtime distribution, user features, public API

### 2. Project Context Classification

**Task Context Rules**:

```
/doh tasks          ‚Üí DOH Runtime project (doh-x.x.x versioning)
/doh-dev tasks      ‚Üí DOH-DEV Internal project (dd-x.x.x versioning)
T### tasks          ‚Üí Must specify project context explicitly
```

**Task Headers Must Include**:

```markdown
**Project**: DOH Runtime (VDOH-1.4.0)

# OR

**Project**: DOH-DEV Internal (VDD-0.1.0)
```

### 3. Dependency Isolation Policy

**Strict Isolation Rules**:

- DOH-DEV tasks CANNOT depend on DOH Runtime tasks (unless explicit)
- DOH Runtime tasks CANNOT depend on DOH-DEV tasks (unless explicit)
- Cross-project dependencies require explicit documentation with rationale
- `/dd:next` analysis respects project boundaries completely

**Exception Format** (when cross-project dependency needed):

```markdown
**Cross-Project Dependency**:

- Depends on: [T###-DOH-Runtime] "task description"
- Rationale: "Why this cross-project dependency is necessary"
- Impact: "What breaks if this dependency fails"
```

### 4. Enhanced `/dd:next` Project Awareness

**Project-Aware Analysis**:

- Filter tasks by project context automatically
- Separate recommendation pools for doh-dev vs doh-runtime
- Version-specific task filtering (dd-x.x.x vs doh-x.x.x goals)
- Project isolation warnings when dependencies cross boundaries

**New Filtering Options**:

```bash
/dd:next --project=doh-dev      # Internal tooling tasks only
/dd:next --project=doh-runtime  # Runtime distribution tasks only
/dd:next --cross-project        # Show cross-boundary dependencies
```

## Tasks

### Phase 1: Version Management Restructure (45min)

- [ ] **Rename current version file**: `version-1.4.0.md` ‚Üí `VDOH-1.4.0.md`
- [ ] **Create doh-dev version file**: `VDD-0.1.0.md` for internal versioning
- [ ] **Update version references** in documentation to use new naming
- [ ] **Establish version progression** rules for both tracks

### Phase 2: Task Context Classification (60min)

- [ ] **Add project context headers** to all active T### tasks
- [ ] **Create project classification guide** for future task creation
- [ ] **Update task templates** to require project specification
- [ ] **Document project boundary rules** in DEVELOPMENT.md

### Phase 3: Command Enhancement (45min)

- [ ] **Update `/dd:next` logic** to respect project boundaries
- [ ] **Add project filtering options** (--project=doh-dev/doh-runtime)
- [ ] **Implement cross-project dependency warnings**
- [ ] **Test project-aware recommendations**

### Phase 4: Documentation & Validation (30min)

- [ ] **Update all command documentation** with project context examples
- [ ] **Create project isolation guide** in docs/
- [ ] **Validate no unintentional cross-project dependencies**
- [ ] **Test both version tracking systems work independently**

## Implementation Examples

### Version File Structure

**VDD-0.1.0.md** (DOH-DEV Internal):

```markdown
# DOH-DEV Version VDD-0.1.0 üõ†Ô∏è

**Philosophy**: Internal development support and command evolution **Target**: 2025-09-01 **Progress**: ~20%

## Goals

**Must Have**:

- Project context isolation
- Enhanced /doh-dev commands
- Clear development workflows

**Should NOT Have**:

- Runtime distribution concerns
- End-user facing features
- Public API changes
```

**VDOH-1.4.0.md** (DOH Runtime):

```markdown
# DOH Runtime Version VDOH-1.4.0 üéØ

**Philosophy**: Transform DOH from internal tool to production runtime **Target**: 2025-09-15 **Progress**: ~60%

## Goals

**Must Have**:

- Runtime distribution system
- AI-powered task intelligence
- Professional documentation

**Should NOT Have**:

- Internal development tooling
- Command development features
- DOH-DEV specific concerns
```

### Task Header Examples

**DOH-DEV Internal Task**:

```markdown
# DD072 - Enhance Command Auto-completion

**Project**: DOH-DEV Internal (VDD-0.1.0) **Status**: READY **Dependencies**: None
```

**DOH Runtime Task**:

```markdown
# DD073 - Implement Task Distribution

**Project**: DOH Runtime (VDOH-1.4.0)  
**Status**: READY **Dependencies**: DOH054 (runtime pipeline)
```

### `/dd:next` Project-Aware Output

```bash
/dd:next --project=doh-dev

üõ†Ô∏è DOH-DEV Internal Tasks (VDD-0.1.0 focus)

1. **DD072** - Enhance command auto-completion (VDD-0.1.0)
   ‚îú‚îÄ‚îÄ üü¢ Ready to start (no blockers)
   ‚îú‚îÄ‚îÄ üõ†Ô∏è Project: DOH-DEV Internal tooling
   ‚îî‚îÄ‚îÄ üéØ Impact: Improves developer experience with commands

/dd:next --project=doh-runtime

üéØ DOH Runtime Tasks (VDOH-1.4.0 focus)

1. **DD073** - Implement task distribution (VDOH-1.4.0)
   ‚îú‚îÄ‚îÄ üü¢ Ready to start (dependencies met)
   ‚îú‚îÄ‚îÄ üöÄ Project: DOH Runtime distribution
   ‚îî‚îÄ‚îÄ üéØ Impact: Enables multi-project DOH usage
```

## Success Criteria

- [ ] **Version separation**: `dd-x.x.x` and `doh-x.x.x` files exist and track independently
- [ ] **Project classification**: All tasks clearly marked with project context
- [ ] **Isolation enforced**: `/dd:next` respects project boundaries
- [ ] **No context mixing**: Commands understand which project they're operating on
- [ ] **Clear task creation**: `/doh` vs `/doh-dev` context understood
- [ ] **Dependency isolation**: Cross-project dependencies require explicit documentation

## Benefits & Impact

- **Context Clarity**: Eliminates confusion between internal vs runtime work
- **Version Precision**: Each project tracks its own evolution independently
- **Dependency Safety**: Prevents accidental cross-project coupling
- **Development Focus**: Commands and recommendations stay project-aware
- **Scalability**: Clear architecture for managing multiple project contexts

## Notes

**Migration Strategy**:

- Existing T### tasks need project context classification
- Current version-1.4.0.md becomes VDOH-1.4.0.md
- New VDD-0.1.0.md starts from clean slate
- `/dd:next` behavior changes are backward compatible

**Project Identification Rules**:

- Task mentions `/doh` commands ‚Üí DOH Runtime
- Task mentions `/doh-dev` commands ‚Üí DOH-DEV Internal
- Task mentions "distribution", "runtime", "end-user" ‚Üí DOH Runtime
- Task mentions "development", "internal", "tooling" ‚Üí DOH-DEV Internal

## Integration Points

- **Complements**: DOH069 command renaming (provides clear project context)
- **Enables**: Future multi-project development without context confusion
- **Requires**: All task creators to specify project context going forward

---

This isolation ensures clean project boundaries and eliminates context mixing between internal development support and
runtime distribution concerns.
