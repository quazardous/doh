# DD114 - Architecture Compliance Audit for Non-Completed Tasks

**Status**: PENDING  
**Priority**: HIGH ⭐ (Architecture Validation)  
**Dependencies**: DD113 ✅ COMPLETED  
**Epic**: EDD116 (DOH Development Architecture Refactoring)

Audit all non-completed tasks to ensure they comply with the new DD113 architecture and update any references to old
directory structures.

## Objective

After DD113 architectural cleanup, verify that all pending and in-progress tasks:

1. **Reference correct paths** - Updated to new `scripts/` structure
2. **Follow architecture principles** - Respect separation by function
3. **Use proper locations** - Scripts vs configs vs cache vs commands
4. **Maintain consistency** - No mixed references to old/new paths

## New Architecture Reference (DD113)

### **Directory Structure Post-DD113**

```text
scripts/                      # ✅ All executable scripts by category
├── linting/                  # Linting execution + plugin management
├── development/              # Development workflow scripts
├── analysis/                 # Analysis and reporting scripts
├── agents/                   # Agent orchestration scripts
├── common/                   # Shared utilities (cross-functional)
└── lib/                      # Script libraries (lint-core.sh, cache-lib.sh)

linting/plugins.d/            # ✅ Pure configurations only (NO scripts)
├── markdownlint/, codespell/, prettier/

.cache/                       # ✅ All cache and temporary data
├── linting/, analysis/, agents/

.claude/commands/             # ✅ Only essential Claude commands
```

### **Key Path Changes Made by DD113**

- `dev-tools/linting/*.sh` → `scripts/linting/`
- `linting/plugins.d/manager_*.sh` → `scripts/linting/`
- `dev-tools/lib/*.sh` → `scripts/lib/`
- `dev-tools/scripts/plugin-proposals.sh` → `scripts/linting/`

## Tasks to Audit

### **High Priority - Active Development Tasks**

**DD103** - Intelligent Linting Feedback System

- ✅ Already updated with new paths during DD113 migration
- Status: COMPLETED, no changes needed

**DD107** - Comprehensive Linting Error Cache System

- Check references to script paths in implementation details
- Verify cache location references (should be `.cache/linting/`)

**DD108** - Dynamic Plugin Management System

- Update plugin manager script paths (moved to `scripts/linting/`)
- Verify plugin.d references (should be config-only)

**DD109** - Automated Plugin Proposal System

- Update script references (plugin-proposals.sh moved)
- Verify integration with new structure

### **Medium Priority - Feature Tasks**

**DD104** - Linting File Organization Audit

- Major scope change needed - architecture now established by DD113
- Convert to documentation task reflecting new structure

**DD105** - Enhanced Pre-commit Hook Integration

- Check dev-tools/hooks/ references (unchanged)
- Verify script path integrations

**DD106** - Linting Performance Optimization

- Update cache references to `.cache/linting/`
- Check script integration paths

### **Documentation Tasks**

**DD100** - Enhanced Error Context Documentation

- Update script path examples
- Verify workflow documentation

**DD099** - Multi-Linter Integration Guide

- Update all script references
- Check workflow examples

## Audit Checklist

For each task file, verify:

### **Path References**

- [ ] No references to `dev-tools/linting/` (moved to `scripts/linting/`)
- [ ] No references to `dev-tools/lib/` (moved to `scripts/lib/`)
- [ ] No references to `linting/plugins.d/manager_*.sh` (moved)
- [ ] Cache references point to `.cache/linting/`
- [ ] Plugin config references point to `linting/plugins.d/` (config only)

### **Architecture Compliance**

- [ ] Scripts referenced are in appropriate `scripts/[category]/`
- [ ] No mixing of executable and configuration paths
- [ ] Follows separation of concerns principle
- [ ] Uses consistent directory structure

### **Integration Points**

- [ ] Command integrations updated (`.claude/commands/`)
- [ ] Makefile targets reference correct paths
- [ ] Documentation examples use new structure
- [ ] Test procedures reference correct locations

## Implementation Tasks

### **1. Task File Audit**

```bash
# Scan for old path references in task files
grep -r "dev-tools/linting" todo/DD*.md
grep -r "dev-tools/lib" todo/DD*.md
grep -r "linting/plugins.d/.*\.sh" todo/DD*.md

# Check for inconsistent references
grep -r "scripts/linting" todo/DD*.md | wc -l  # Should be > 0
grep -r "\.cache/linting" todo/DD*.md | wc -l  # Should be > 0
```

### **2. Documentation Updates**

- [ ] Update all task files with incorrect paths
- [ ] Standardize cache location references
- [ ] Fix plugin management script references
- [ ] Update workflow examples and commands

### **3. Command Reference Updates**

- [ ] Check `.claude/commands/dd/lint.md` for correct paths
- [ ] Update integration documentation
- [ ] Verify Makefile targets
- [ ] Test command execution with new paths

### **4. Validation Testing**

- [ ] Test linting workflows still function
- [ ] Verify plugin management works
- [ ] Confirm cache operations work
- [ ] Check agent integration paths

## Success Criteria

✅ **Path Consistency**: All task references use new DD113 structure  
✅ **Architecture Compliance**: All tasks respect separation principles  
✅ **Working Integration**: All workflows function with new paths  
✅ **Documentation Accuracy**: Examples and guides reflect new structure  
✅ **No Mixed References**: Consistent use of new paths throughout

## Priority Matrix

### **Critical (Must Fix Immediately)**

- Tasks with workflow dependencies (DD107, DD108, DD109)
- Active development tasks that reference moved scripts
- Command documentation that users rely on

### **Important (Fix Before Release)**

- Documentation tasks with outdated examples
- Feature tasks with architectural impacts
- Integration guides and workflows

### **Nice to Have (Fix When Convenient)**

- Archived task references
- Historical documentation
- Internal development notes

## Expected Findings

Based on DD113 migration, expect to find:

- **10-15 task files** with outdated path references
- **5-8 command files** needing path updates
- **Multiple documentation files** with old examples
- **Several workflow descriptions** needing architectural updates

## Deliverables

1. **Updated task files** - All non-completed tasks with correct paths
2. **Command reference updates** - All `.claude/commands/` files updated
3. **Documentation fixes** - Examples and guides reflect new structure
4. **Validation report** - Confirmation all workflows function correctly
5. **Architecture compliance** - All tasks follow DD113 principles

This audit ensures the DOH development project maintains architectural consistency and that all pending work aligns with
the clean structure established by DD113.
