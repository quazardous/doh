# DD107: Lint Error Cache System - Simple File Helper

**Status**: TODO  
**Priority**: HIGH  
**Assigned**: Claude  
**Created**: 2025-08-29  
**Type**: Feature

## Objective

Implement a simple lint error cache system using a plain text file helper to optimize linting workflow by tracking files
with errors and focusing only on problematic files.

## Problem Statement

Current linting processes all files every time, even clean ones. We need a simple cache system that:

- Tracks files with linting errors in a plain text list
- Allows flexible usage with Unix tools (grep, head, xargs, etc.)
- Enables focused linting on only problematic files
- Provides progress tracking (how many files left to fix)

## Solution Design

### Core Implementation

**Simple cache structure**:

```text
.cache/linting/
└── error-files.txt    # One file path per line
```

**Workflow**:

1. **Scan**: Populate error-files.txt with files that have linting errors
2. **Process**: Use helper file with standard Unix tools to process subsets
3. **Update**: Remove fixed files from list as they're cleaned
4. **Progress**: Check file count to see remaining work

### Usage Examples

```bash
# Initial scan - populate cache
mkdir -p .cache/linting
find . -name "*.md" -print0 | xargs -0 ./dev-tools/scripts/lint-files.sh --check 2>&1 | grep "❌" | cut -d: -f1 | sort -u > .cache/linting/error-files.txt

# Process all error files
cat .cache/linting/error-files.txt | xargs ./dev-tools/scripts/lint-files.sh --fix

# Process subset (first 10 files)
head -10 .cache/linting/error-files.txt | xargs ./dev-tools/scripts/lint-files.sh --fix

# Process specific directory only
grep "todo/" .cache/linting/error-files.txt | xargs ./dev-tools/scripts/lint-files.sh --fix

# Check progress
echo "Files remaining: $(wc -l < .cache/linting/error-files.txt)"

# Update cache after fixing (remove clean files)
while read -r file; do
    if ./dev-tools/scripts/lint-files.sh --check "$file" 2>&1 | grep -q "✅"; then
        grep -v "^$file$" .cache/linting/error-files.txt > .cache/linting/error-files.txt.tmp
        mv .cache/linting/error-files.txt.tmp .cache/linting/error-files.txt
    fi
done < .cache/linting/error-files.txt
```

## Implementation Plan

### Phase 1: Basic Cache Creation

- [ ] Create `.cache/linting/` directory
- [ ] Implement scan function to populate `error-files.txt`
- [ ] Test with current modified files

### Phase 2: Helper Scripts

- [ ] Create `scripts/lint-scan.sh` - populate error cache
- [ ] Create `scripts/lint-progress.sh` - show remaining count
- [ ] Create `scripts/lint-update-cache.sh` - remove fixed files

### Phase 3: Integration

- [ ] Integrate with `/dd:lint` workflow
- [ ] Add documentation for cache usage
- [ ] Test with large file sets

## Benefits

- ⚡ **Performance**: Skip clean files automatically
- 🎯 **Focus**: Work only on problematic files
- 📊 **Progress**: Clear visibility on remaining work
- 🔧 **Flexibility**: Use with standard Unix tools
- 📝 **Simple**: Plain text file, no complex formats

## Success Criteria

- [ ] Cache system tracks linting errors accurately
- [ ] Helper file works with xargs, grep, head, tail
- [ ] Progress tracking shows remaining file count
- [ ] Performance improvement vs full scans
- [ ] Integration with existing linting workflow

## Files to Create/Modify

- `scripts/lint-scan.sh` - Cache population script
- `scripts/lint-progress.sh` - Progress reporting
- `scripts/lint-update-cache.sh` - Cache maintenance
- `.cache/linting/error-files.txt` - Error file list (generated)
- Documentation updates for cache usage

## Notes

Keep it simple - just a text file with file paths. The power comes from Unix tool integration, not complex features.
