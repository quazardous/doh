# E095 - DOH Runtime Agent System: Universal Multi-Agent Development Platform

**Epic Status**: PROPOSED  
**Priority**: MEDIUM (After E091 validation)  
**Epic Components**: T101, T102, T103, T104, T105, T106, T107
**Dependencies**: E091 (DOH-DEV Multi-Agent System - prototype validation)

Port and generalize the multi-agent development system from DOH-DEV prototype to DOH Runtime as a universal, project-agnostic development platform that any project can adopt.

## ğŸ¯ Epic Vision

**Transform DOH-DEV learnings** into a **universal agent-first development platform**:
- DOH-DEV = **Prototype/Testing Environment** (specific to DOH project)
- DOH Runtime = **Production Distribution** (generic for any project)

## Epic Phases

- **T101**: DOH Runtime CLAUDE.md Template (Generic Development Guidelines)
- **T102**: DOH Runtime DEVELOPMENT.md Template (Universal Development Rules)
- **T103**: Universal Agent System Templates (Project-Agnostic Agent Library)
- **T104**: Generic Pair Programming Framework (Language/Framework Independent)
- **T105**: Universal Project Management Team System (Any Domain)
- **T106**: Generic Context Optimization (Clean Console for Any Project)
- **T107**: DOH Runtime Agent Orchestration (Universal Workflow Engine)

## Progress Tracking

### Completed Tasks
- [x] Epic E095 - Created and planned

### Pending Tasks (Blocked by E091)
- [ ] T101 - DOH Runtime CLAUDE.md Template
- [ ] T102 - DOH Runtime DEVELOPMENT.md Template  
- [ ] T103 - Universal Agent System Templates
- [ ] T104 - Generic Pair Programming Framework
- [ ] T105 - Universal Project Management Team
- [ ] T106 - Generic Context Optimization
- [ ] T107 - DOH Runtime Agent Orchestration

## ğŸ¯ **Context Generalization Challenge**

### **DOH-DEV vs DOH-Runtime as Learning Example**

**Key Insight from User**: *"doh-dev et doh sont des exemples prÃ©cis de context dans l'epic qui va gÃ©rer tout Ã§a pour doh runtime il faudra gÃ©nÃ©raliser"*

This Epic faces the **context generalization challenge**:

**Current DOH Context** (Specific):
- `DOH-DEV Internal` vs `DOH Runtime` 
- `/dd:*` commands vs `/doh:*` commands
- `dd-0.1.0` versioning vs `doh-1.4.0` versioning  
- Internal tooling vs user distribution

**Universal Context** (Generalized for E095):
- `[PROJECT_INTERNAL]` vs `[PROJECT_RUNTIME]`
- `[DEV_COMMANDS]` vs `[USER_COMMANDS]`  
- `[INTERNAL_VERSION]` vs `[PUBLIC_VERSION]`
- Development tooling vs production features

### **Context Learning from E091 Counter-Example**

**The Error**: Claude missed that E091 was DOH-DEV Internal context when responding to `/dd:next --internal`, demonstrating why context awareness must be generalized:

**DOH-Specific Pattern** (learned from error):
- Epic E091 = DOH-DEV Internal (not Runtime)
- `/dd:next --internal` = DOH-DEV focus only
- Multi-agent system = internal development tool classification

**Universal Pattern** (for any project):
- `[EPIC_XXX]` context = `[PROJECT_INTERNAL]` or `[PROJECT_RUNTIME]`
- `[COMMAND] --internal` = `[DEV_CONTEXT]` focus pattern
- Agent systems = development vs production infrastructure detection

### **Generalization Strategy for T103-T107**

**T103 (Universal Agent Templates)** must handle:
```bash
# DOH-specific (prototype)  
if project == "DOH":
    internal_context = "DOH-DEV"
    runtime_context = "DOH Runtime"
    
# Generic (universal)
internal_context = detect_internal_context(project)
runtime_context = detect_runtime_context(project)
```

**T106 (Generic Context Optimization)** must abstract:
- DOH-DEV workspace â†’ `[PROJECT]/.dev-agents/workspace/`
- DOH Runtime context â†’ `[PROJECT]/.agents/workspace/`  
- `/dd:next --internal` â†’ `[DEV_TOOL] --internal` universal pattern

This Epic transforms **specific DOH context patterns** learned in E091 into **universal context management** for any project type.

## ğŸ”„ **Prototype to Production Philosophy**

### **DOH-DEV Role: Prototype & Learning Lab**
```bash
DOH-DEV Purpose:
â”œâ”€â”€ Test agent collaboration concepts
â”œâ”€â”€ Validate pair programming in Claude
â”œâ”€â”€ Learn optimal workflows  
â”œâ”€â”€ Prototype context management
â”œâ”€â”€ Experiment with PM team concepts
â””â”€â”€ Iterate quickly on DOH-specific use cases
```

### **DOH Runtime Role: Universal Platform**
```bash
DOH Runtime Purpose:  
â”œâ”€â”€ Generic templates for any project
â”œâ”€â”€ Language/framework agnostic agents
â”œâ”€â”€ Universal development best practices
â”œâ”€â”€ Project-independent workflows
â”œâ”€â”€ Reusable agent system architecture
â””â”€â”€ Distribution-ready for all Claude users
```

## ğŸ“š **Generic Documentation Strategy**

### **Challenge: Project-Agnostic Guidelines**
Current CLAUDE.md is DOH-specific. Need templates that work for:
- **Any programming language** (Python, JavaScript, Rust, Go, etc.)
- **Any project type** (Web apps, CLI tools, libraries, etc.)
- **Any development approach** (Agile, Lean, Enterprise, etc.)
- **Any team size** (Solo developer, small team, enterprise)

### **Solution: Template-Based Documentation**

#### **T101: Universal CLAUDE.md Template**
```markdown
# Project Configuration for AI Development (Template)

## ğŸ¤– Agent-Oriented Development Workflow

**CRITICAL PRINCIPLE**: This project uses specialized AI agents

### Agent Routing Rules  
- **Task Creation**: Use PM Agent for strategic planning
- **Code Implementation**: Use Senior Dev Agent  
- **Quality Analysis**: Use Code Analyzer Agent

### TODO-First Development (Mandatory)
**CORE RULE**: "Never work without having a clear mature TODO"

### Project-Specific Customization
[PROJECT_TYPE]: {web_app|cli_tool|library|api|other}
[LANGUAGES]: {javascript|python|rust|go|java|etc}
[FRAMEWORK]: {react|django|axum|gin|spring|etc}

# ... Generic sections that adapt to project context
```

#### **T102: Universal DEVELOPMENT.md Template**
```markdown
# Development Guidelines (Generic Template)

## Code Quality Standards

### Architecture Patterns (Customizable)
- **DRY Principle**: Factor out duplicated code
- **SOLID Principles**: Apply systematically  
- **Framework-Specific**: [Adapts to detected tech stack]

### Language-Specific Standards
[DETECTED_LANGUAGE]:
  - Naming: [language_conventions]
  - Testing: [language_test_frameworks] 
  - Linting: [language_linters]

### Project Structure (Auto-Generated)
[Scans project and generates structure documentation]
```

## ğŸ¤– **Universal Agent Templates**

### **Challenge: Generic vs Specialized**
Agents need to work across different:
- Programming languages and paradigms
- Project domains (web, mobile, desktop, embedded)
- Development methodologies  
- Team structures and workflows

### **T103: Universal Agent System Templates**

#### **Generic PM Agent Template**
```markdown
# PM Agent (Universal Template)

**Role**: Strategic project planning (language/domain agnostic)
**Expertise**: Requirements analysis, epic breakdown, prioritization
**Adapts to**:
  - [PROJECT_DOMAIN]: web|mobile|cli|api|library|embedded
  - [METHODOLOGY]: agile|lean|waterfall|kanban
  - [TEAM_SIZE]: solo|small|medium|enterprise

**Specialized Prompts by Context**:
```

#### **Generic Senior Dev Agent Template**  
```markdown
# Senior Dev Agent (Universal Template)

**Role**: Implementation expertise (multi-language)
**Core Capabilities**: 
  - Code quality across languages
  - Architecture patterns (generic + language-specific)
  - Performance optimization (platform-aware)
  
**Language Adaptation**:
  - JavaScript/TypeScript: [JS-specific expertise]
  - Python: [Python-specific expertise]  
  - Rust: [Rust-specific expertise]
  - [AUTO_DETECT]: Adapts to detected project languages
```

## ğŸ¤ **Generic Pair Programming Framework**

### **T104: Language/Framework Independent Pairing**

#### **Universal Driver-Navigator Patterns**
```bash
# Works across any tech stack
/pair T101 --driver=senior-dev --navigator=analyzer
â†’ Language detected: Python  
â†’ Loads Python-specific linting rules
â†’ Applies Python code quality standards
â†’ Uses pytest for testing patterns

/pair T102 --driver=senior-dev --navigator=analyzer  
â†’ Language detected: Rust
â†’ Loads Rust-specific patterns (ownership, lifetimes)
â†’ Applies cargo/clippy standards
â†’ Uses Rust testing conventions
```

#### **Cross-Language Learning**
```bash
# Agents learn patterns across languages
Pattern: "Repository Pattern in TypeScript"
â†’ Stores in universal pattern library
â†’ Adapts to Python: "Repository with SQLAlchemy"  
â†’ Adapts to Rust: "Repository with Diesel"
â†’ Adapts to Go: "Repository with GORM"
```

## ğŸ‘¥ **Universal PM Team System**

### **T105: Domain-Agnostic Project Management**

#### **Generic PO + Lead Dev Collaboration**
```bash
# Adapts to any project domain
/pm-team "add user authentication"

E-commerce Project:
â”œâ”€â”€ PO Agent: Customer login, payment security, account management
â”œâ”€â”€ Lead Dev: OAuth, session management, PCI compliance
â””â”€â”€ Output: E-commerce focused Epic

Healthcare Project:  
â”œâ”€â”€ PO Agent: Patient privacy, HIPAA compliance, role-based access
â”œâ”€â”€ Lead Dev: Encryption, audit trails, security frameworks
â””â”€â”€ Output: Healthcare focused Epic

CLI Tool Project:
â”œâ”€â”€ PO Agent: User experience, command interface, configuration
â”œâ”€â”€ Lead Dev: Argument parsing, cross-platform compatibility  
â””â”€â”€ Output: CLI focused Epic
```

## ğŸ§  **Generic Context Management**

### **T106: Universal Console Optimization**
Adapt T094 context optimization to work with any project:

```bash
# Project-agnostic context isolation
.doh/agents/workspace/           # DOH-DEV specific
â†’
[PROJECT]/.agents/workspace/     # Generic location
â”œâ”€â”€ pm-agent/                   # Adapts to project domain
â”œâ”€â”€ senior-dev/                 # Adapts to tech stack  
â”œâ”€â”€ analyzer/                   # Adapts to project languages
â””â”€â”€ shared/                     # Project context
```

## ğŸ”§ **Universal Workflow Engine**

### **T107: DOH Runtime Agent Orchestration**

#### **Generic Command Interface**
```bash
# Works in any project that adopts DOH Runtime
npm install -g @doh/runtime
doh init                        # Detects project type, sets up agents
doh pm-team "plan feature"      # PM collaboration
doh pair "implement feature"    # Pair programming  
doh commit                      # Smart commits
doh next                        # Task recommendations
```

#### **Auto-Configuration**
```bash
# DOH Runtime detects project and configures accordingly
doh init
â†’ Detects: Node.js + React + TypeScript project
â†’ Installs: JavaScript-focused agent configurations
â†’ Sets up: ESLint, Prettier, Jest integration
â†’ Configures: React-specific PM patterns

doh init  
â†’ Detects: Rust + Cargo project
â†’ Installs: Rust-focused agent configurations
â†’ Sets up: Clippy, rustfmt, cargo test integration
â†’ Configures: Systems programming PM patterns
```

## ğŸ“Š **Distribution Strategy**

### **DOH Runtime as Universal Package**
```bash
# Multiple distribution channels
npm install -g @doh/runtime     # Node.js projects
cargo install doh-runtime       # Rust projects  
pip install doh-runtime         # Python projects
go install doh-runtime          # Go projects

# Generic CLI that adapts
doh --help                      # Shows commands relevant to detected project
```

### **Template Library System**
```bash
# Community templates
doh template list
â”œâ”€â”€ web-app-react              # React + TypeScript + Vite
â”œâ”€â”€ api-fastify                # Node.js API with Fastify
â”œâ”€â”€ cli-rust                   # Rust CLI with Clap
â”œâ”€â”€ python-django              # Django web application
â””â”€â”€ go-gin-api                 # Go API with Gin

doh template install web-app-react
â†’ Sets up React-specific agent configurations
â†’ Installs React-focused PM patterns
â†’ Configures TypeScript + ESLint integration
```

## ğŸ¯ **Success Criteria**

### **Universal Adoption Metrics**
- **Any tech stack**: Works with 10+ different language/framework combinations
- **Generic documentation**: CLAUDE.md/DEVELOPMENT.md templates work for any project
- **Agent portability**: PM/Senior Dev/Analyzer agents adapt to project context
- **Zero DOH-specific dependencies**: Runtime system works independently

### **Value Validation**
- **Faster onboarding**: New projects get agent system in <10 minutes
- **Quality consistency**: Same development standards across diverse projects  
- **Learning transfer**: Patterns learned in one project apply to others
- **Community adoption**: External projects successfully adopt DOH Runtime

## ğŸ”„ **Migration Strategy**

### **Phase 1: Extract Generic Patterns from DOH-DEV**
```bash
E091 Success â†’ Identify reusable patterns
â”œâ”€â”€ What works universally vs DOH-specific
â”œâ”€â”€ Which agent capabilities are transferable
â”œâ”€â”€ How PM team patterns generalize
â””â”€â”€ Where context optimization applies broadly
```

### **Phase 2: Create Universal Templates**
```bash
DOH-DEV Learnings â†’ Generic Templates
â”œâ”€â”€ CLAUDE.md (DOH-specific) â†’ Universal CLAUDE.md template
â”œâ”€â”€ Agent prompts (DOH-focused) â†’ Language-agnostic agent templates
â”œâ”€â”€ Workflows (internal dev) â†’ Generic development workflows
â””â”€â”€ Commands (/dd:*) â†’ Universal commands (doh:*)
```

### **Phase 3: Validate Across Different Projects**
```bash
Test DOH Runtime with:
â”œâ”€â”€ React web application (JavaScript/TypeScript)
â”œâ”€â”€ Python CLI tool (Click/Typer)
â”œâ”€â”€ Rust systems project (Tokio/Axum)  
â”œâ”€â”€ Go microservice (Gin/Fiber)
â””â”€â”€ Measure adoption success and iterate
```

## ğŸ **Epic Deliverable**

A **universal multi-agent development platform** that:
- **Generalizes DOH-DEV innovations** for any project type
- **Provides generic templates** (CLAUDE.md, DEVELOPMENT.md) that adapt to project context
- **Offers language-agnostic agents** that specialize based on detected tech stack
- **Enables pair programming** across different languages and frameworks
- **Supports PM team collaboration** for any project domain
- **Maintains clean console experience** regardless of project complexity
- **Distributes as DOH Runtime** for universal Claude.ai user adoption

**Vision**: Every Claude.ai user can instantly upgrade their project with proven agent-first development workflows, regardless of their tech stack or project type.

---

**Epic E095 transforms DOH-DEV from internal prototype into universal development revolution** ğŸš€