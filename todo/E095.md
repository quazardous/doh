# E095 - DOH Runtime Agent System: Universal Multi-Agent Development Platform

**Epic Status**: PROPOSED  
**Priority**: MEDIUM (After E091 validation)  
**Epic Components**: T101, T102, T103, T104, T105, T106, T107
**Dependencies**: E091 (DOH-DEV Multi-Agent System - prototype validation)

Port and generalize the multi-agent development system from DOH-DEV prototype to DOH Runtime as a universal, project-agnostic development platform that any project can adopt.

## üéØ Epic Vision

**Transform DOH-DEV learnings** into a **universal agent-first development platform**:
- DOH-DEV = **Prototype/Testing Environment** (specific to DOH project)
- DOH Runtime = **Production Distribution** (generic for any project)

## Epic Phases

- **T101**: DOH Runtime CLAUDE.md Template (Generic Development Guidelines)
- **T102**: DOH Runtime DEVELOPMENT.md Template (Universal Development Rules)
- **T103**: Universal Agent System Templates (Project-Agnostic Agent Library)
- **T104**: Generic Pair Programming Framework (Language/Framework Independent)
- **T105**: Universal Project Management Team System (Any Domain)
- **T106**: Generic Context Optimization (Clean Console for Any Project)
- **T107**: DOH Runtime Agent Orchestration (Universal Workflow Engine)

## Progress Tracking

### Completed Tasks
- [x] Epic E095 - Created and planned

### Pending Tasks (Blocked by E091)
- [ ] T101 - DOH Runtime CLAUDE.md Template
- [ ] T102 - DOH Runtime DEVELOPMENT.md Template  
- [ ] T103 - Universal Agent System Templates
- [ ] T104 - Generic Pair Programming Framework
- [ ] T105 - Universal Project Management Team
- [ ] T106 - Generic Context Optimization
- [ ] T107 - DOH Runtime Agent Orchestration

## üéØ **Context Generalization Challenge**

### **DOH-DEV vs DOH-Runtime as Learning Example**

**Key Insight from User**: *"doh-dev et doh sont des exemples pr√©cis de context dans l'epic qui va g√©rer tout √ßa pour doh runtime il faudra g√©n√©raliser"*

This Epic faces the **context generalization challenge**:

**Current DOH Context** (Specific):
- `DOH-DEV Internal` vs `DOH Runtime` 
- `/dd:*` commands vs `/doh:*` commands
- `dd-0.1.0` versioning vs `doh-1.4.0` versioning  
- Internal tooling vs user distribution

**Universal Context** (Generalized for E095):
- `[PROJECT_INTERNAL]` vs `[PROJECT_RUNTIME]`
- `[DEV_COMMANDS]` vs `[USER_COMMANDS]`  
- `[INTERNAL_VERSION]` vs `[PUBLIC_VERSION]`
- Development tooling vs production features

### **Context Learning from E091 Counter-Example**

**The Error**: Claude missed that E091 was DOH-DEV Internal context when responding to `/dd:next --internal`, demonstrating why context awareness must be generalized:

**DOH-Specific Pattern** (learned from error):
- Epic E091 = DOH-DEV Internal (not Runtime)
- `/dd:next --internal` = DOH-DEV focus only
- Multi-agent system = internal development tool classification

**Universal Pattern** (for any project):
- `[EPIC_XXX]` context = `[PROJECT_INTERNAL]` or `[PROJECT_RUNTIME]`
- `[COMMAND] --internal` = `[DEV_CONTEXT]` focus pattern
- Agent systems = development vs production infrastructure detection

### **Generalization Strategy for T103-T107**

**T103 (Universal Agent Templates)** must handle:
```bash
# DOH-specific (prototype)  
if project == "DOH":
    internal_context = "DOH-DEV"
    runtime_context = "DOH Runtime"
    
# Generic (universal)
internal_context = detect_internal_context(project)
runtime_context = detect_runtime_context(project)
```

**T106 (Generic Context Optimization)** must abstract:
- DOH-DEV workspace ‚Üí `[PROJECT]/.dev-agents/workspace/`
- DOH Runtime context ‚Üí `[PROJECT]/.agents/workspace/`  
- `/dd:next --internal` ‚Üí `[DEV_TOOL] --internal` universal pattern

This Epic transforms **specific DOH context patterns** learned in E091 into **universal context management** for any project type.

## üîÑ **Prototype to Production Philosophy**

### **DOH-DEV Role: Prototype & Learning Lab**
```bash
DOH-DEV Purpose:
‚îú‚îÄ‚îÄ Test agent collaboration concepts
‚îú‚îÄ‚îÄ Validate pair programming in Claude
‚îú‚îÄ‚îÄ Learn optimal workflows  
‚îú‚îÄ‚îÄ Prototype context management
‚îú‚îÄ‚îÄ Experiment with PM team concepts
‚îî‚îÄ‚îÄ Iterate quickly on DOH-specific use cases
```

### **DOH Runtime Role: Universal Platform**
```bash
DOH Runtime Purpose:  
‚îú‚îÄ‚îÄ Generic templates for any project
‚îú‚îÄ‚îÄ Language/framework agnostic agents
‚îú‚îÄ‚îÄ Universal development best practices
‚îú‚îÄ‚îÄ Project-independent workflows
‚îú‚îÄ‚îÄ Reusable agent system architecture
‚îî‚îÄ‚îÄ Distribution-ready for all Claude users
```

## üìö **Generic Documentation Strategy**

### **Challenge: Project-Agnostic Guidelines**
Current CLAUDE.md is DOH-specific. Need templates that work for:
- **Any programming language** (Python, JavaScript, Rust, Go, etc.)
- **Any project type** (Web apps, CLI tools, libraries, etc.)
- **Any development approach** (Agile, Lean, Enterprise, etc.)
- **Any team size** (Solo developer, small team, enterprise)

### **Solution: Template-Based Documentation**

#### **T101: Universal CLAUDE.md Template**
```markdown
# Project Configuration for AI Development (Template)

## ü§ñ Agent-Oriented Development Workflow

**CRITICAL PRINCIPLE**: This project uses specialized AI agents

### Agent Routing Rules  
- **Task Creation**: Use PM Agent for strategic planning
- **Code Implementation**: Use Senior Dev Agent  
- **Quality Analysis**: Use Code Analyzer Agent

### TODO-First Development (Mandatory)
**CORE RULE**: "Never work without having a clear mature TODO"

### Project-Specific Customization
[PROJECT_TYPE]: {web_app|cli_tool|library|api|other}
[LANGUAGES]: {javascript|python|rust|go|java|etc}
[FRAMEWORK]: {react|django|axum|gin|spring|etc}

# ... Generic sections that adapt to project context
```

#### **T102: Universal DEVELOPMENT.md Template**
```markdown
# Development Guidelines (Generic Template)

## Code Quality Standards

### Architecture Patterns (Customizable)
- **DRY Principle**: Factor out duplicated code
- **SOLID Principles**: Apply systematically  
- **Framework-Specific**: [Adapts to detected tech stack]

### Language-Specific Standards
[DETECTED_LANGUAGE]:
  - Naming: [language_conventions]
  - Testing: [language_test_frameworks] 
  - Linting: [language_linters]

### Project Structure (Auto-Generated)
[Scans project and generates structure documentation]
```

## ü§ñ **Universal Agent Templates**

### **Challenge: Generic vs Specialized**
Agents need to work across different:
- Programming languages and paradigms
- Project domains (web, mobile, desktop, embedded)
- Development methodologies  
- Team structures and workflows

### **T103: Universal Agent System Templates**

#### **Generic PM Agent Template**
```markdown
# PM Agent (Universal Template)

**Role**: Strategic project planning (language/domain agnostic)
**Expertise**: Requirements analysis, epic breakdown, prioritization
**Adapts to**:
  - [PROJECT_DOMAIN]: web|mobile|cli|api|library|embedded
  - [METHODOLOGY]: agile|lean|waterfall|kanban
  - [TEAM_SIZE]: solo|small|medium|enterprise

**Specialized Prompts by Context**:
```

#### **Generic Senior Dev Agent Template**  
```markdown
# Senior Dev Agent (Universal Template)

**Role**: Implementation expertise (multi-language)
**Core Capabilities**: 
  - Code quality across languages
  - Architecture patterns (generic + language-specific)
  - Performance optimization (platform-aware)
  
**Language Adaptation**:
  - JavaScript/TypeScript: [JS-specific expertise]
  - Python: [Python-specific expertise]  
  - Rust: [Rust-specific expertise]
  - [AUTO_DETECT]: Adapts to detected project languages
```

## ü§ù **Generic Pair Programming Framework**

### **T104: Language/Framework Independent Pairing**

#### **Universal Driver-Navigator Patterns**
```bash
# Works across any tech stack
/pair T101 --driver=senior-dev --navigator=analyzer
‚Üí Language detected: Python  
‚Üí Loads Python-specific linting rules
‚Üí Applies Python code quality standards
‚Üí Uses pytest for testing patterns

/pair T102 --driver=senior-dev --navigator=analyzer  
‚Üí Language detected: Rust
‚Üí Loads Rust-specific patterns (ownership, lifetimes)
‚Üí Applies cargo/clippy standards
‚Üí Uses Rust testing conventions
```

#### **Cross-Language Learning**
```bash
# Agents learn patterns across languages
Pattern: "Repository Pattern in TypeScript"
‚Üí Stores in universal pattern library
‚Üí Adapts to Python: "Repository with SQLAlchemy"  
‚Üí Adapts to Rust: "Repository with Diesel"
‚Üí Adapts to Go: "Repository with GORM"
```

## üë• **Universal PM Team System**

### **T105: Domain-Agnostic Project Management**

#### **Generic PO + Lead Dev Collaboration**
```bash
# Adapts to any project domain
/pm-team "add user authentication"

E-commerce Project:
‚îú‚îÄ‚îÄ PO Agent: Customer login, payment security, account management
‚îú‚îÄ‚îÄ Lead Dev: OAuth, session management, PCI compliance
‚îî‚îÄ‚îÄ Output: E-commerce focused Epic

Healthcare Project:  
‚îú‚îÄ‚îÄ PO Agent: Patient privacy, HIPAA compliance, role-based access
‚îú‚îÄ‚îÄ Lead Dev: Encryption, audit trails, security frameworks
‚îî‚îÄ‚îÄ Output: Healthcare focused Epic

CLI Tool Project:
‚îú‚îÄ‚îÄ PO Agent: User experience, command interface, configuration
‚îú‚îÄ‚îÄ Lead Dev: Argument parsing, cross-platform compatibility  
‚îî‚îÄ‚îÄ Output: CLI focused Epic
```

## üß† **Generic Context Management**

### **T106: Universal Console Optimization**
Adapt T094 context optimization to work with any project:

```bash
# Project-agnostic context isolation
.doh/agents/workspace/           # DOH-DEV specific
‚Üí
[PROJECT]/.agents/workspace/     # Generic location
‚îú‚îÄ‚îÄ pm-agent/                   # Adapts to project domain
‚îú‚îÄ‚îÄ senior-dev/                 # Adapts to tech stack  
‚îú‚îÄ‚îÄ analyzer/                   # Adapts to project languages
‚îî‚îÄ‚îÄ shared/                     # Project context
```

## üîß **Universal Workflow Engine**

### **T107: DOH Runtime Agent Orchestration**

#### **Generic Command Interface**
```bash
# Works in any project that adopts DOH Runtime
npm install -g @doh/runtime
doh init                        # Detects project type, sets up agents
doh pm-team "plan feature"      # PM collaboration
doh pair "implement feature"    # Pair programming  
doh commit                      # Smart commits
doh next                        # Task recommendations
```

#### **Auto-Configuration**
```bash
# DOH Runtime detects project and configures accordingly
doh init
‚Üí Detects: Node.js + React + TypeScript project
‚Üí Installs: JavaScript-focused agent configurations
‚Üí Sets up: ESLint, Prettier, Jest integration
‚Üí Configures: React-specific PM patterns

doh init  
‚Üí Detects: Rust + Cargo project
‚Üí Installs: Rust-focused agent configurations
‚Üí Sets up: Clippy, rustfmt, cargo test integration
‚Üí Configures: Systems programming PM patterns
```

## üìä **Distribution Strategy**

### **DOH Runtime as Universal Package**
```bash
# Multiple distribution channels
npm install -g @doh/runtime     # Node.js projects
cargo install doh-runtime       # Rust projects  
pip install doh-runtime         # Python projects
go install doh-runtime          # Go projects

# Generic CLI that adapts
doh --help                      # Shows commands relevant to detected project
```

### **Template Library System**
```bash
# Community templates
doh template list
‚îú‚îÄ‚îÄ web-app-react              # React + TypeScript + Vite
‚îú‚îÄ‚îÄ api-fastify                # Node.js API with Fastify
‚îú‚îÄ‚îÄ cli-rust                   # Rust CLI with Clap
‚îú‚îÄ‚îÄ python-django              # Django web application
‚îî‚îÄ‚îÄ go-gin-api                 # Go API with Gin

doh template install web-app-react
‚Üí Sets up React-specific agent configurations
‚Üí Installs React-focused PM patterns
‚Üí Configures TypeScript + ESLint integration
```

## üéØ **Success Criteria**

### **Universal Adoption Metrics**
- **Any tech stack**: Works with 10+ different language/framework combinations
- **Generic documentation**: CLAUDE.md/DEVELOPMENT.md templates work for any project
- **Agent portability**: PM/Senior Dev/Analyzer agents adapt to project context
- **Zero DOH-specific dependencies**: Runtime system works independently

### **Value Validation**
- **Faster onboarding**: New projects get agent system in <10 minutes
- **Quality consistency**: Same development standards across diverse projects  
- **Learning transfer**: Patterns learned in one project apply to others
- **Community adoption**: External projects successfully adopt DOH Runtime

## üîÑ **Migration Strategy**

### **Phase 1: Extract Generic Patterns from DOH-DEV**
```bash
E091 Success ‚Üí Identify reusable patterns
‚îú‚îÄ‚îÄ What works universally vs DOH-specific
‚îú‚îÄ‚îÄ Which agent capabilities are transferable
‚îú‚îÄ‚îÄ How PM team patterns generalize
‚îî‚îÄ‚îÄ Where context optimization applies broadly
```

### **Phase 2: Create Universal Templates**
```bash
DOH-DEV Learnings ‚Üí Generic Templates
‚îú‚îÄ‚îÄ CLAUDE.md (DOH-specific) ‚Üí Universal CLAUDE.md template
‚îú‚îÄ‚îÄ Agent prompts (DOH-focused) ‚Üí Language-agnostic agent templates
‚îú‚îÄ‚îÄ Workflows (internal dev) ‚Üí Generic development workflows
‚îî‚îÄ‚îÄ Commands (/dd:*) ‚Üí Universal commands (doh:*)
```

### **Phase 3: Validate Across Different Projects**
```bash
Test DOH Runtime with:
‚îú‚îÄ‚îÄ React web application (JavaScript/TypeScript)
‚îú‚îÄ‚îÄ Python CLI tool (Click/Typer)
‚îú‚îÄ‚îÄ Rust systems project (Tokio/Axum)  
‚îú‚îÄ‚îÄ Go microservice (Gin/Fiber)
‚îî‚îÄ‚îÄ Measure adoption success and iterate
```

## üéÅ **Epic Deliverable**

A **universal multi-agent development platform** that:
- **Generalizes DOH-DEV innovations** for any project type
- **Provides generic templates** (CLAUDE.md, DEVELOPMENT.md) that adapt to project context
- **Offers language-agnostic agents** that specialize based on detected tech stack
- **Enables pair programming** across different languages and frameworks
- **Supports PM team collaboration** for any project domain
- **Maintains clean console experience** regardless of project complexity
- **Distributes as DOH Runtime** for universal Claude.ai user adoption

**Vision**: Every Claude.ai user can instantly upgrade their project with proven agent-first development workflows, regardless of their tech stack or project type.

---

**Epic E095 transforms DOH-DEV from internal prototype into universal development revolution** üöÄ